<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 2495 - Code::Blocks History</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../pygments.css">
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #2495 <small>2008-06-15 13:07</small></h3>
          <h4>dermeister</h4>
          Replace wxFlatNotebook used for editors by wxAuiNotebook
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="2495-Replace_wxFlat.patch">2495-Replace_wxFlat.patch</a> (84.3 KB)</dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::Refinement</dd>
            <dt>Status</dt><dd>Accepted</dd>
            <dt>Close date</dt><dd>2009-07-07 12:35 <a href="http://cb.biplab.in/websvn/log.php?sr=5686"><span class="glyphicon glyphicon-link"></span></a></dd>
            <dt>Assigned to</dt><dd>mortenmacfly</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: configure.in</span>
<span class="gh">===================================================================</span>
<span class="gd">--- configure.in    (revision 5189)</span>
<span class="gi">+++ configure.in    (working copy)</span>
<span class="gu">@@ -221,7 +221,6 @@</span>
     src/include/scripting/sqstdlib/Makefile
     src/include/scripting/squirrel/Makefile
     src/include/tinyxml/Makefile
<span class="gd">-    src/include/wxFlatNotebook/Makefile</span>
     src/include/wxscintilla/Makefile
     src/sdk/Makefile
     src/sdk/scripting/Makefile
<span class="gu">@@ -230,7 +229,6 @@</span>
     src/sdk/scripting/sqstdlib/Makefile
     src/sdk/scripting/sqplus/Makefile
     src/sdk/wxscintilla/Makefile
<span class="gd">-    src/sdk/wxFlatNotebook/Makefile</span>
     src/sdk/resources/Makefile
     src/sdk/resources/lexers/Makefile
     src/src/wxAUI/Makefile
<span class="gh">Index: src/sdk/projectmanager.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/sdk/projectmanager.cpp    (revision 5189)</span>
<span class="gi">+++ src/sdk/projectmanager.cpp    (working copy)</span>
<span class="gu">@@ -38,7 +38,9 @@</span>
 #include &lt;wx/utils.h&gt;
 #include &lt;wx/textdlg.h&gt;
 #include &lt;wx/progdlg.h&gt;
<span class="gd">-#include &quot;wx/wxFlatNotebook/wxFlatNotebook.h&quot;</span>
<span class="gi">+#include &lt;wx/filedlg.h&gt;</span>
<span class="gi">+#include &lt;wx/choicdlg.h&gt;</span>
<span class="gi">+#include &lt;wx/aui/auibook.h&gt;</span>
 
 #include &quot;incrementalselectlistdlg.h&quot;
 #include &quot;filegroupsandmasks.h&quot;
<span class="gu">@@ -157,6 +159,8 @@</span>
     EVT_TREE_ITEM_RIGHT_CLICK(ID_ProjectManager, ProjectManager::OnTreeItemRightClick)
     EVT_COMMAND_RIGHT_CLICK(ID_ProjectManager, ProjectManager::OnRightClick)
 
<span class="gi">+    EVT_AUINOTEBOOK_TAB_RIGHT_UP(idNB, ProjectManager::OnTabContextMenu)</span>
<span class="gi">+</span>
     EVT_MENU_RANGE(idOpenWith[0], idOpenWith[MAX_OPEN_WITH_ITEMS - 1], ProjectManager::OnOpenWith)
     EVT_MENU(idOpenWithInternal, ProjectManager::OnOpenWith)
     EVT_MENU(idNB_TabTop, ProjectManager::OnTabPosition)
<span class="gu">@@ -216,20 +220,14 @@</span>
     m_isCheckingForExternallyModifiedProjects(false),
     m_CanSendWorkspaceChanged(false)
 {
<span class="gd">-    m_pNotebook = new wxFlatNotebook(Manager::Get()-&gt;GetAppWindow(), idNB);</span>
<span class="gd">-    m_pNotebook-&gt;SetWindowStyleFlag(Manager::Get()-&gt;GetConfigManager(_T(&quot;app&quot;))-&gt;ReadInt(_T(&quot;/environment/project_tabs_style&quot;), wxFNB_NO_X_BUTTON));</span>
<span class="gd">-    m_pNotebook-&gt;SetImageList(new wxFlatNotebookImageList);</span>
<span class="gi">+    m_pNotebook = new wxAuiNotebook(Manager::Get()-&gt;GetAppWindow(), idNB, wxDefaultPosition, wxDefaultSize, wxAUI_NB_WINDOWLIST_BUTTON);</span>
<span class="gi">+    if (Manager::Get()-&gt;GetConfigManager(_T(&quot;app&quot;))-&gt;ReadBool(_T(&quot;/environment/project_tabs_bottom&quot;), false))</span>
<span class="gi">+        m_pNotebook-&gt;SetWindowStyleFlag(m_pNotebook-&gt;GetWindowStyleFlag() | wxAUI_NB_BOTTOM);</span>
 
<span class="gd">-    wxMenu* NBmenu = new wxMenu(); // deleted automatically by wxFlatNotebook</span>
<span class="gd">-    NBmenu-&gt;Append(idNB_TabTop, _(&quot;Tabs at top&quot;));</span>
<span class="gd">-    NBmenu-&gt;Append(idNB_TabBottom, _(&quot;Tabs at bottom&quot;));</span>
<span class="gd">-    m_pNotebook-&gt;SetRightClickMenu(NBmenu);</span>
<span class="gd">-</span>
     m_InitialDir=wxFileName::GetCwd();
     m_pActiveProject = 0L;
     m_pProjects = new ProjectsArray;
     m_pProjects-&gt;Clear();
<span class="gd">-    // m_pPanel = new wxPanel(parent, wxID_ANY, wxDefaultPosition, wxDefaultSize, wxTAB_TRAVERSAL | wxCLIP_CHILDREN);</span>
     InitPane();
 
     m_pFileGroups = new FilesGroupsAndMasks;
<span class="gu">@@ -272,7 +270,6 @@</span>
     delete m_pImages;m_pImages = 0;
     delete m_pFileGroups;m_pFileGroups = 0;
 
<span class="gd">-    delete m_pNotebook-&gt;GetImageList();</span>
     m_pNotebook-&gt;Destroy();
 }
 
<span class="gu">@@ -1646,16 +1643,25 @@</span>
 
 // events
 
<span class="gi">+void ProjectManager::OnTabContextMenu(wxAuiNotebookEvent&amp; event)</span>
<span class="gi">+{</span>
<span class="gi">+    wxMenu* NBmenu = new wxMenu();</span>
<span class="gi">+    NBmenu-&gt;Append(idNB_TabTop, _(&quot;Tabs at top&quot;));</span>
<span class="gi">+    NBmenu-&gt;Append(idNB_TabBottom, _(&quot;Tabs at bottom&quot;));</span>
<span class="gi">+    m_pNotebook-&gt;PopupMenu(NBmenu);</span>
<span class="gi">+    delete NBmenu;</span>
<span class="gi">+}</span>
<span class="gi">+</span>
 void ProjectManager::OnTabPosition(wxCommandEvent&amp; event)
 {
     long style = m_pNotebook-&gt;GetWindowStyleFlag();
<span class="gd">-    style &amp;= ~wxFNB_BOTTOM;</span>
<span class="gi">+    style &amp;= ~wxAUI_NB_BOTTOM;</span>
 
     if (event.GetId() == idNB_TabBottom)
<span class="gd">-        style |= wxFNB_BOTTOM;</span>
<span class="gi">+        style |= wxAUI_NB_BOTTOM;</span>
     m_pNotebook-&gt;SetWindowStyleFlag(style);
<span class="gd">-    // (style &amp; wxFNB_BOTTOM) saves info only about the the tabs position</span>
<span class="gd">-    Manager::Get()-&gt;GetConfigManager(_T(&quot;app&quot;))-&gt;Write(_T(&quot;/environment/project_tabs_bottom&quot;), (bool)(style &amp; wxFNB_BOTTOM));</span>
<span class="gi">+    // (style &amp; wxAUI_NB_BOTTOM) saves info only about the the tabs position</span>
<span class="gi">+    Manager::Get()-&gt;GetConfigManager(_T(&quot;app&quot;))-&gt;Write(_T(&quot;/environment/project_tabs_bottom&quot;), (bool)(style &amp; wxAUI_NB_BOTTOM));</span>
 }
 
 void ProjectManager::OnTreeBeginDrag(wxTreeEvent&amp; event)
<span class="gh">Index: src/sdk/editorbase.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/sdk/editorbase.cpp    (revision 5189)</span>
<span class="gi">+++ src/sdk/editorbase.cpp    (working copy)</span>
<span class="gu">@@ -21,10 +21,11 @@</span>
     #include &quot;cbproject.h&quot; // FileTreeData
     #include &lt;wx/wfstream.h&gt;
 #endif
<span class="gi">+</span>
<span class="gi">+#include &lt;wx/aui/auibook.h&gt;</span>
<span class="gi">+</span>
 #include &quot;cbstyledtextctrl.h&quot;
 
<span class="gd">-#include &quot;wx/wxFlatNotebook/wxFlatNotebook.h&quot;</span>
<span class="gd">-</span>
 // needed for initialization of variables
 int editorbase_RegisterId(int id)
 {
<span class="gh">Index: src/sdk/editormanager.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/sdk/editormanager.cpp    (revision 5189)</span>
<span class="gi">+++ src/sdk/editormanager.cpp    (working copy)</span>
<span class="gu">@@ -42,6 +42,7 @@</span>
 #include
<em><strong>download for full patch...</strong></em>
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">dermeister 2008-06-15 13:10</div>
        <div class="panel-body">
          <p>This patch replaces the wxFlatNotebook containing the open editors by wxAuiNotebook. This allows detaching the editor and dragging it at another position. That way it is possible to edit two different files at one.</p>
          <p>This patch also removes the old editor splitting mechanism as it is no more required.</p>
          <p>Small drawback: The style of the tabs looks different than the style of wxFlatNotebook and cannot be changed from the application (yet).</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">dermeister 2008-06-27 18:10</div>
        <div class="panel-body">
          <p>I updated the patch. See the following forum post for more information:</p>
          <p><a href="http://forums.codeblocks.org/index.php/topic,8595.msg63339.html#msg63339" data-toggle="tooltip" title="Multi File editing">http://forums.codeblocks.org/index.php/topic,8595.msg63339.html#msg63339</a></p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">dermeister 2008-07-22 16:19</div>
        <div class="panel-body">
          <p>I updated the patch. See the following forum post for more information:</p>
          <p><a href="http://forums.codeblocks.org/index.php/topic,8595.msg64128.html#msg64128" data-toggle="tooltip" title="Multi File editing">http://forums.codeblocks.org/index.php/topic,8595.msg64128.html#msg64128</a></p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">dermeister 2008-07-27 14:18</div>
        <div class="panel-body">
          <p>Updated the patch again. This update fixes a regression introduced with one of the last updates.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">dermeister 2008-08-21 17:14</div>
        <div class="panel-body">
          <p>Updated the patch again. This update adds the possibility to navigate between open editors using Ctrl+Tab (or other key combinations, depending on the platform)</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mortenmacfly 2009-01-19 06:23</div>
        <div class="panel-body">
          <p>For the record: Most likely you have already realised that there is a special branch for this patch meanwhile. We are happily testing... This will be the next major change in C::B. ;-)</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mortenmacfly 2009-07-07 12:35</div>
        <div class="panel-body">
          <p>Applied (heavily modified) in trunk. Thanks a LOT!!!</p>
          <p>Also see:</p>
          <p><a href="http://forums.codeblocks.org/index.php/topic,10810.0.html" data-toggle="tooltip" title="wxAuiNotebook introduction in TRUNK">http://forums.codeblocks.org/index.php/topic,10810.0.html</a></p>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function() {
        $("body").tooltip({ selector: '[data-toggle=tooltip]' });
      });
    </script>
  </body>
</html>
