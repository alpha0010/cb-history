<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 3140 - Code::Blocks History</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../pygments.css">
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #3140 <small>2011-03-21 15:00</small></h3>
          <h4>olipfei</h4>
          ANSI related and other minor fixes patch
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="3140-ANSI_related_a.patch">3140-ANSI_related_a.patch</a> (4.1 KB)</dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::Bugfix</dd>
            <dt>Status</dt><dd>Accepted</dd>
            <dt>Close date</dt><dd>2012-09-04 14:37 <a href="http://cb.biplab.in/websvn/log.php?sr=8357"><span class="glyphicon glyphicon-link"></span></a></dd>
            <dt>Assigned to</dt><dd>mortenmacfly</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: src/plugins/contrib/HexEditor/HexEditPanel.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/contrib/HexEditor/HexEditPanel.cpp    (revision 7060)</span>
<span class="gi">+++ src/plugins/contrib/HexEditor/HexEditPanel.cpp    (working copy)</span>
<span class="gu">@@ -1029,7 +1029,11 @@</span>
 
         default:
         {
<span class="gi">+#if wxUSE_UNICODE</span>
             m_ActiveView-&gt;PutChar( event.GetUnicodeKey() );
<span class="gi">+#else</span>
<span class="gi">+            m_ActiveView-&gt;PutChar( event.GetKeyCode() );</span>
<span class="gi">+#endif</span>
             break;
         }
     }
<span class="gh">Index: src/plugins/contrib/wxSmith/wxwidgets/defitems/wxsimagelist.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/contrib/wxSmith/wxwidgets/defitems/wxsimagelist.cpp    (revision 7060)</span>
<span class="gi">+++ src/plugins/contrib/wxSmith/wxwidgets/defitems/wxsimagelist.cpp    (working copy)</span>
<span class="gu">@@ -159,10 +159,10 @@</span>
         m_Count = 0;
 
         m_ImageData.Clear();
<span class="gd">-        ss.Printf(_T(&quot;%d&quot;), m_Width);</span>
<span class="gi">+        ss.Printf(_T(&quot;%ld&quot;), m_Width);</span>
         m_ImageData.Add(ss);
 
<span class="gd">-        ss.Printf(_T(&quot;%d&quot;), m_Height);</span>
<span class="gi">+        ss.Printf(_T(&quot;%ld&quot;), m_Height);</span>
         m_ImageData.Add(ss);
     }
     // else reset the displayed size
<span class="gh">Index: src/plugins/contrib/NassiShneiderman/CParser.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/contrib/NassiShneiderman/CParser.cpp    (revision 7060)</span>
<span class="gi">+++ src/plugins/contrib/NassiShneiderman/CParser.cpp    (working copy)</span>
<span class="gu">@@ -23,7 +23,11 @@</span>
 
     typedef rule&lt;scanner&lt;wxChar const *&gt; &gt; rule_t;
 
<span class="gi">+#if wxUSE_UNICODE</span>
     const wxChar *buf = str.wc_str();
<span class="gi">+#else</span>
<span class="gi">+    const wxChar *buf = str.c_str();</span>
<span class="gi">+#endif</span>
 
     //wxMessageBox(str, _T(&quot;parsing:&quot;));
     rule_t preprocessor   = comment_p( _T(&quot;#&quot;) );
<span class="gh">Index: src/plugins/contrib/ToolsPlus/PipedProcessCtrl.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/contrib/ToolsPlus/PipedProcessCtrl.cpp    (revision 7060)</span>
<span class="gi">+++ src/plugins/contrib/ToolsPlus/PipedProcessCtrl.cpp    (working copy)</span>
<span class="gu">@@ -259,7 +259,11 @@</span>
         kc1[0]=&#39;\n&#39;;
     }
 //    cbMessageBox(_T(&quot;key press: &quot;)+wxString::FromAscii(kc1)+wxString::Format(_T(&quot; keycode: %i&quot;),ke.GetKeyCode()));
<span class="gi">+#if wxUSE_UNICODE</span>
     wxChar kc2=ke.GetUnicodeKey();
<span class="gi">+#else</span>
<span class="gi">+    wxChar kc2=ke.GetKeyCode();</span>
<span class="gi">+#endif</span>
     wxString buf(kc2);
     //kc1[0]=buf[0];
     m_ostream-&gt;Write(kc1,1);
<span class="gh">Index: src/plugins/contrib/AutoVersioning/AutoVersioning.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/contrib/AutoVersioning/AutoVersioning.cpp    (revision 7060)</span>
<span class="gi">+++ src/plugins/contrib/AutoVersioning/AutoVersioning.cpp    (working copy)</span>
<span class="gu">@@ -727,7 +727,7 @@</span>
                     iLast = sLine.Find(&#39;&quot;&#39;, true);
                     // Create a new version string...
                     wxString sVersion = sLine.SubString(iFirst, iLast);
<span class="gd">-                    wxString sNewVersion = wxString::Format(wxT(&quot;\&quot;%d.%d.%d\&quot;&quot;), GetVersionState().Values.Major, GetVersionState().Values.Minor, GetVersionState().Values.Build);</span>
<span class="gi">+                    wxString sNewVersion = wxString::Format(wxT(&quot;\&quot;%ld.%ld.%ld\&quot;&quot;), GetVersionState().Values.Major, GetVersionState().Values.Minor, GetVersionState().Values.Build);</span>
                     // ...and insert it into the XML.
                     sLine.Replace(sVersion, sNewVersion);
                     // Remove the existing line and replace it with the new one.
<span class="gh">Index: src/plugins/codecompletion/parser/token.h</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/codecompletion/parser/token.h    (revision 7060)</span>
<span class="gi">+++ src/plugins/codecompletion/parser/token.h    (working copy)</span>
<span class="gu">@@ -88,12 +88,12 @@</span>
         {
             const long totalTime = it-&gt;first-&gt;m_StopWatch.Time();
             wxString log;
<span class="gd">-            log.Printf(_T(&quot;\&quot;%s\&quot; used time is %d minute(s), %ld.%03ld seconds; call times is %d.&quot;),</span>
<span class="gi">+            log.Printf(_T(&quot;\&quot;%s\&quot; used time is %ld minute(s), %ld.%03ld seconds; call times is %ld.&quot;),</span>
                        it-&gt;second.wx_str(),
                        (totalTime / 60000),
                        (totalTime / 1000) % 60,
                        (totalTime % 1000),
<span class="gd">-                       it-&gt;first-&gt;m_CallTimes);</span>
<span class="gi">+                       (long)it-&gt;first-&gt;m_CallTimes);</span>
 #ifndef CC_PARSER_TEST
             Manager::Get()-&gt;GetLogManager()-&gt;DebugLog(log);
 #endif
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">olipfei 2011-03-21 15:08</div>
        <div class="panel-body">
          <p>This patch should be considered a collection of minor fixes to eliminate compilation errors and reduce warnings in ANSI build of CB. I don't know how strong the development focus on ANSI compilation is anyway, but I hope that the patch is of interest also for other folks and will update it in future accordingly.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mortenmacfly 2012-07-07 14:49</div>
        <div class="panel-body">
          <p>I think most of it made it into trunk in the meantime. Could you verify if there is still something missing, please?</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">olipfei 2012-07-27 20:01</div>
        <div class="panel-body">
          <p>I checked all fixes, and in fact, not only most, but all of them made it into the trunk. Thanks! Do you intend to keep this thread open, if I find similar issues in future, or should I create a new patch instead?</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mortenmacfly 2012-09-04 14:37</div>
        <div class="panel-body">
          <p>Please create new instead - closing now.</p>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </body>
</html>
