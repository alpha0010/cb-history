<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 1541 - Code::Blocks History</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <link rel="stylesheet" href="../pygments.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #1541 <small>2006-10-09 14:35:21</small></h3>
          <h4>nix_bb</h4>
          wxFlatNotebook 2.0
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="1541-wxFlatNotebook.patch">1541-wxFlatNotebook.patch</a></dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::Refinement</dd>
            <dt>Status</dt><dd>Closed</dd>
            <dt>Close date</dt><dd>2006-10-11 13:42:44</dd>
            <dt>Assigned to</dt><dd>&nbsp;</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: src/CodeBlocks.cbp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/CodeBlocks.cbp    (revision 3049)</span>
<span class="gi">+++ src/CodeBlocks.cbp    (working copy)</span>
<span class="gu">@@ -3513,6 +3513,42 @@</span>
             &lt;Option link=&quot;0&quot; /&gt;
             &lt;Option target=&quot;sdk&quot; /&gt;
         &lt;/Unit&gt;
<span class="gi">+        &lt;Unit filename=&quot;sdk\wxFlatNotebook\fnb_resources.cpp&quot;&gt;</span>
<span class="gi">+            &lt;Option compilerVar=&quot;CPP&quot; /&gt;</span>
<span class="gi">+            &lt;Option target=&quot;wxFlatNotebook&quot; /&gt;</span>
<span class="gi">+        &lt;/Unit&gt;</span>
<span class="gi">+        &lt;Unit filename=&quot;sdk\wxFlatNotebook\popup_dlg.cpp&quot;&gt;</span>
<span class="gi">+            &lt;Option compilerVar=&quot;CPP&quot; /&gt;</span>
<span class="gi">+            &lt;Option target=&quot;wxFlatNotebook&quot; /&gt;</span>
<span class="gi">+        &lt;/Unit&gt;</span>
<span class="gi">+        &lt;Unit filename=&quot;sdk\wxFlatNotebook\popup_dlg.h&quot;&gt;</span>
<span class="gi">+            &lt;Option compilerVar=&quot;CPP&quot; /&gt;</span>
<span class="gi">+            &lt;Option compile=&quot;0&quot; /&gt;</span>
<span class="gi">+            &lt;Option link=&quot;0&quot; /&gt;</span>
<span class="gi">+            &lt;Option target=&quot;wxFlatNotebook&quot; /&gt;</span>
<span class="gi">+        &lt;/Unit&gt;</span>
<span class="gi">+        &lt;Unit filename=&quot;sdk\wxFlatNotebook\renderer.cpp&quot;&gt;</span>
<span class="gi">+            &lt;Option compilerVar=&quot;CPP&quot; /&gt;</span>
<span class="gi">+            &lt;Option target=&quot;wxFlatNotebook&quot; /&gt;</span>
<span class="gi">+        &lt;/Unit&gt;</span>
<span class="gi">+        &lt;Unit filename=&quot;sdk\wxFlatNotebook\renderer.h&quot;&gt;</span>
<span class="gi">+            &lt;Option compilerVar=&quot;CPP&quot; /&gt;</span>
<span class="gi">+            &lt;Option compile=&quot;0&quot; /&gt;</span>
<span class="gi">+            &lt;Option link=&quot;0&quot; /&gt;</span>
<span class="gi">+            &lt;Option target=&quot;wxFlatNotebook&quot; /&gt;</span>
<span class="gi">+        &lt;/Unit&gt;</span>
<span class="gi">+        &lt;Unit filename=&quot;sdk\wxFlatNotebook\singleton.h&quot;&gt;</span>
<span class="gi">+            &lt;Option compilerVar=&quot;CPP&quot; /&gt;</span>
<span class="gi">+            &lt;Option compile=&quot;0&quot; /&gt;</span>
<span class="gi">+            &lt;Option link=&quot;0&quot; /&gt;</span>
<span class="gi">+            &lt;Option target=&quot;wxFlatNotebook&quot; /&gt;</span>
<span class="gi">+        &lt;/Unit&gt;</span>
<span class="gi">+        &lt;Unit filename=&quot;sdk\wxFlatNotebook\smart_ptr.h&quot;&gt;</span>
<span class="gi">+            &lt;Option compilerVar=&quot;CPP&quot; /&gt;</span>
<span class="gi">+            &lt;Option compile=&quot;0&quot; /&gt;</span>
<span class="gi">+            &lt;Option link=&quot;0&quot; /&gt;</span>
<span class="gi">+            &lt;Option target=&quot;wxFlatNotebook&quot; /&gt;</span>
<span class="gi">+        &lt;/Unit&gt;</span>
         &lt;Unit filename=&quot;sdk\wxFlatNotebook\wxFNBDropTarget.h&quot;&gt;
             &lt;Option compilerVar=&quot;CPP&quot; /&gt;
             &lt;Option compile=&quot;0&quot; /&gt;
<span class="gh">Index: src/sdk/editormanager.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/sdk/editormanager.cpp    (revision 3049)</span>
<span class="gi">+++ src/sdk/editormanager.cpp    (working copy)</span>
<span class="gu">@@ -671,7 +671,7 @@</span>
     //    LOGSTREAM &lt;&lt; wxString::Format(_T(&quot;RemoveEditorBase(): ed=%p, title=%s\n&quot;), eb, eb ? eb-&gt;GetFilename().c_str() : _T(&quot;&quot;));
     int page = FindPageFromEditor(eb);
    if (page != -1 &amp;&amp; !Manager::isappShuttingDown())
<span class="gd">-        m_pNotebook-&gt;RemovePage(page, false);</span>
<span class="gi">+        m_pNotebook-&gt;RemovePage(page);</span>

 #ifdef USE_OPENFILES_TREE
     //        if (eb-&gt;IsBuiltinEditor())
<span class="gu">@@ -809,7 +809,7 @@</span>
                     return false;
             wxString filename = editor-&gt;GetFilename();
             //            LOGSTREAM &lt;&lt; wxString::Format(_T(&quot;Close(): ed=%p, title=%s\n&quot;), editor, editor ? editor-&gt;GetTitle().c_str() : _T(&quot;&quot;));
<span class="gd">-            m_pNotebook-&gt;DeletePage(idx, false);</span>
<span class="gi">+            m_pNotebook-&gt;DeletePage(idx);</span>
         }
     }
     m_pData-&gt;m_NeedsRefresh = true;
<span class="gu">@@ -2736,3 +2736,4 @@</span>
     return m_zoom;
 }

<span class="gi">+</span>
<span class="gh">Index: src/sdk/wxFlatNotebook/fnb_resources.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/sdk/wxFlatNotebook/fnb_resources.cpp    (revision 0)</span>
<span class="gi">+++ src/sdk/wxFlatNotebook/fnb_resources.cpp    (revision 0)</span>
<span class="gu">@@ -0,0 +1,36 @@</span>
<span class="gi">+#include &lt;stdlib.h&gt;</span>
<span class="gi">+</span>
<span class="gi">+size_t tab_selection_png_size = 665;</span>
<span class="gi">+unsigned char tab_selection_png[] = {</span>
<span class="gi">+137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,16,0,0,0,16,8,6,0,0,</span>
<span class="gi">+0,31,243,255,97,0,0,0,43,116,69,88,116,67,114,101,97,116,105,111,110,32,</span>
<span class="gi">+84,105,109,101,0,83,111,32,50,51,32,70,101,98,32,50,48,48,51,32,50,49,58,</span>
<span class="gi">+49,54,58,49,56,32,43,48,49,48,48,249,138,209,35,0,0,0,7,116,73,77,69,7,</span>
<span class="gi">+211,2,23,23,43,34,85,9,241,31,0,0,0,9,112,72,89,115,0,0,11,18,0,0,11,18,</span>
<span class="gi">+1,210,221,126,252,0,0,0,4,103,65,77,65,0,0,177,143,11,252,97,5,0,0,1,241,</span>
<span class="gi">+73,68,65,84,120,218,205,146,93,72,83,113,24,198,127,103,231,28,79,219,100,</span>
<span class="gi">+51,231,44,22,125,24,187,8,34,210,28,4,125,32,72,31,116,19,10,65,93,134,</span>
<span class="gi">+87,38,120,81,215,177,139,160,91,7,101,144,208,69,17,116,149,133,72,130,</span>
<span class="gi">+33,102,65,84,216,72,152,125,136,133,180,173,176,114,211,181,143,179,237,</span>
<span class="gi">+108,231,244,223,164,66,49,161,59,223,139,255,159,247,125,159,247,225,229,</span>
<span class="gi">+121,94,216,112,49,117,27,45,246,236,228,131,239,51,61,75,31,39,218,147,</span>
<span class="gi">+145,129,218,254,245,240,182,213,133,241,52,254,184,148,232,240,170,134,</span>
<span class="gi">+91,93,138,110,14,133,143,95,160,43,222,205,185,72,51,109,95,148,213,120,</span>
<span class="gi">+105,69,214,207,145,19,173,173,119,118,53,186,119,15,14,141,115,240,209,</span>
<span class="gi">+89,70,246,92,179,90,218,26,217,86,39,250,63,75,57,163,172,132,71,103,185,</span>
<span class="gi">+196,101,41,92,25,249,195,184,247,201,206,224,249,192,225,160,167,214,46,</span>
<span class="gi">+135,238,61,38,17,5,87,141,9,79,71,164,55,207,11,124,240,186,173,253,1,191,</span>
<span class="gi">+67,245,249,142,146,40,12,210,59,23,224,122,211,194,50,193,21,154,156,41,</span>
<span class="gi">+35,104,232,105,91,207,141,251,228,23,139,213,221,36,75,244,156,14,176,107,</span>
<span class="gi">+232,168,210,203,201,40,245,190,52,218,190,3,59,10,217,236,93,209,61,85,</span>
<span class="gi">+213,64,41,219,186,37,7,242,232,228,123,242,63,138,203,202,228,32,149,149,</span>
<span class="gi">+5,139,11,52,65,162,213,136,149,156,36,117,19,51,22,23,128,186,87,149,89,</span>
<span class="gi">+185,242,88,237,13</span>
<em><strong>file truncated...</strong></em>
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">artoj 2006-10-10 10:49:46</div>
        <div class="panel-body">
          <p>What do the ' prefix_auto="0" extension_auto="0" ' have to do with this patch?</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">nix_bb 2006-10-10 17:07:31</div>
        <div class="panel-body">
          <p>Nothing at all - I'll remove it.</p>
          <p>My apologies for any inconvinience caused.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">artoj 2006-10-10 19:34:54</div>
        <div class="panel-body">
          <p>No problem, I'm just asking :)</p>
          <p>However, I can't test this patch because TortoiseMerge gives error in line 60, "An unknown line type was found in line 60".</p>
          <p>Also, could you explain what changes you did to the "env_settings.xrc" file?</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">killerbot 2006-10-11 07:27:56</div>
        <div class="panel-body">
          <p>CB adds that in cbp file !</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">killerbot 2006-10-11 07:32:06</div>
        <div class="panel-body">
          <p>indeed patch can't be applied, but don't worry, this patch is not usable anyway, since several changes were made on the wxFNB code by CB developers, I have made upgraded my wxFNB to 2.0 and applied to CB changes, testing that now. Then after that I will add the extra functionality you have put in.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">nix_bb 2006-10-11 07:58:26</div>
        <div class="panel-body">
          <pre class="pre-scrollable">Sorry, I've done something horribly wrong somewhere- hope you can forgive the noob :)

Apart from the upgrade to wxFNB 2.0 my patch should only add the following to the specified files.

src/src/resources/envsettings.xrc
(add a checkbox to pblNotebooks)
+                                &lt;object class="sizeritem"&gt;
+                                   &lt;border&gt;8&lt;/border&gt;
+                                    &lt;flag&gt;wxALL|wxALIGN_LEFT|wxALIGN_TOP&lt;/flag&gt;
+                                    &lt;object class="wxCheckBox" name="chkSmartTabs"&gt;
+                                        &lt;label&gt;Use Smart Tab-switching scheme&lt;/label&gt;
+                                    &lt;/object&gt;
+                                &lt;/object&gt;


src/src/environmentsettingsdlg.cpp
     XRCCTRL(*this, "cmbEditorTabs", wxComboBox)-&gt;SetSelection(cfg-&gt;ReadInt(_T("/environment/tabs_style"), 0));
+    XRCCTRL(*this, "chkSmartTabs", wxCheckBox)-&gt;SetValue(cfg-&gt;ReadBool(_T("/environment/tabs_smart"), 0));

         cfg-&gt;Write(_T("/environment/tabs_style"),           (int)XRCCTRL(*this, "cmbEditorTabs", wxComboBox)-&gt;GetSelection());
+        cfg-&gt;Write(_T("/environment/tabs_smart"),           (bool)XRCCTRL(*this, "chkSmartTabs", wxCheckBox)-&gt;GetValue());

src/src/main.cpp
     if (cfg-&gt;ReadBool(_T("/environment/") + prefix + _T("_tabs_bottom")))
         nbstyle |= wxFNB_BOTTOM;

+    if (cfg-&gt;ReadBool(_T("/environment/tabs_smart")))
+        nbstyle |= wxFNB_SMART_TABS;
+</pre>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">killerbot 2006-10-11 08:18:32</div>
        <div class="panel-body">
          <p>already done that ;-)</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">nix_bb 2006-10-11 08:53:00</div>
        <div class="panel-body">
          <p>That's because you're a MACHINE, no - a KILLER MACHINE! :o</p>
          <p>Thank you for all your help, now you can delete this patch :)</p>
          <p>-Nix</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">killerbot 2006-10-11 13:42:44</div>
        <div class="panel-body">
          <p>done but in a little different way</p>
          <p>svn : 3071-3072</p>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>