<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 2865 - Code::Blocks History</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../pygments.css">
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #2865 <small>2009-12-20 18:57</small></h3>
          <h4>techy</h4>
          Categorize source files regardless of their capitalization
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="2865-Categorize_sou.patch">2865-Categorize_sou.patch</a> (1.8 KB)</dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::Refinement</dd>
            <dt>Status</dt><dd>Accepted</dd>
            <dt>Close date</dt><dd>2010-02-03 17:44 <a href="http://cb.biplab.in/websvn/log.php?sr=6134"><span class="glyphicon glyphicon-link"></span></a></dd>
            <dt>Assigned to</dt><dd>mortenmacfly</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: src/sdk/filegroupsandmasks.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/sdk/filegroupsandmasks.cpp    (revision 5986)</span>
<span class="gi">+++ src/sdk/filegroupsandmasks.cpp    (working copy)</span>
<span class="gu">@@ -64,21 +64,21 @@</span>
 
     // only add default groups if none were loaded...
     unsigned int group = AddGroup(_(&quot;Sources&quot;));
<span class="gd">-    SetFileMasks(group, _T(&quot;*.c;*.cpp;*.cc;*.cxx;*.C;*.CPP;*.CC;*.CXX&quot;) );</span>
<span class="gi">+    SetFileMasks(group, _T(&quot;*.c;*.cpp;*.cc;*.cxx&quot;) );</span>
     group = AddGroup(_(&quot;D Sources&quot;));
<span class="gd">-    SetFileMasks(group, _T(&quot;*.d;*.D&quot;) );</span>
<span class="gi">+    SetFileMasks(group, _T(&quot;*.d&quot;) );</span>
     group = AddGroup(_(&quot;Fortran Sources&quot;));
<span class="gd">-    SetFileMasks(group, _T(&quot;*.f;*.f77;*.f90;*.f95;*.F;*.F77;*.F90;*.F95&quot;) );</span>
<span class="gi">+    SetFileMasks(group, _T(&quot;*.f;*.f77;*.f90;*.f95&quot;) );</span>
     group = AddGroup(_(&quot;Java Sources&quot;));
<span class="gd">-    SetFileMasks(group, _T(&quot;*.java;*.JAVA&quot;) );</span>
<span class="gi">+    SetFileMasks(group, _T(&quot;*.java&quot;) );</span>
     group = AddGroup(_(&quot;Headers&quot;));
<span class="gd">-    SetFileMasks(group, _T(&quot;*.h;*.hpp;*.hh;*.hxx;*.H;*.HPP;*.HH;*.HXX&quot;) );</span>
<span class="gi">+    SetFileMasks(group, _T(&quot;*.h;*.hpp;*.hh;*.hxx&quot;) );</span>
     group = AddGroup(_(&quot;ASM Sources&quot;));
<span class="gd">-    SetFileMasks(group, _T(&quot;*.asm;*.ASM;*.s;*.S;*.ss;*.SS;*.s62;*.S62&quot;) );</span>
<span class="gi">+    SetFileMasks(group, _T(&quot;*.asm;*.s;*.ss;*.s62&quot;) );</span>
     group = AddGroup(_(&quot;Resources&quot;));
<span class="gd">-    SetFileMasks(group, _T(&quot;*.res;*.xrc;*.rc;*.RES;*.XRC;*.RC&quot;) );</span>
<span class="gi">+    SetFileMasks(group, _T(&quot;*.res;*.xrc;*.rc&quot;) );</span>
     group = AddGroup(_(&quot;Scripts&quot;));
<span class="gd">-    SetFileMasks(group, _T(&quot;*.script;*.SCRIPT&quot;) );</span>
<span class="gi">+    SetFileMasks(group, _T(&quot;*.script&quot;) );</span>
 }
 
 void FilesGroupsAndMasks::Load()
<span class="gu">@@ -186,7 +186,7 @@</span>
     const FileGroups* fg = m_Groups[group];
     for (unsigned int i = 0; i &lt; fg-&gt;fileMasks.GetCount(); ++i)
     {
<span class="gd">-        if (ext.Matches(fg-&gt;fileMasks[i]))</span>
<span class="gi">+        if (ext.Lower().Matches(fg-&gt;fileMasks[i].Lower()))</span>
             return true;
     }
     return false;
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">techy 2009-12-20 19:06</div>
        <div class="panel-body">
          <p>Right now you have to set all combinations of extension capitalisation in order to have a source file categorized. For instance, for c++ sources you have to set *.cpp, *.CPP, which are the default ones, but this does not recognise for instance *.Cpp. This patch simplifies this by converting the input file and the extension to lowercase before match test is made so all combinations of uppercases and lowercases will be treated the same way.</p>
          <p>Note that this patch should be applied together with the header/source swapping patch (the last or the previous version, but not the original patch), otherwise header/source swapping might not work correctly.</p>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </body>
</html>
