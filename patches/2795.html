<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 2795 - Code::Blocks History</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../pygments.css">
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #2795 <small>2009-07-30 20:04</small></h3>
          <h4>techy</h4>
          Various memory problem fixes (part 1)
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="2795-Various_memory.patch">2795-Various_memory.patch</a> (459 bytes)</dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::Bugfix</dd>
            <dt>Status</dt><dd>Accepted</dd>
            <dt>Close date</dt><dd>2009-08-24 07:31 <a href="http://cb.biplab.in/websvn/log.php?sr=5742"><span class="glyphicon glyphicon-link"></span></a></dd>
            <dt>Assigned to</dt><dd>mortenmacfly</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: src/sdk/encodingdetector.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/sdk/encodingdetector.cpp    (revision 5716)</span>
<span class="gi">+++ src/sdk/encodingdetector.cpp    (working copy)</span>
<span class="gu">@@ -189,7 +189,7 @@</span>
             wxCSConv conv(m_Encoding);

             wideBuff = conv.cMB2WC((char*)buffer, size + 4 - m_BOMSizeInBytes, &amp;outlen);

         }

<span class="gd">-        delete tmp;</span>

<span class="gi">+        delete[] tmp;</span>

     }

 

     m_ConvStr = wxString(wideBuff);
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">techy 2009-07-30 20:06</div>
        <div class="panel-body">
          <p>When testing with Valgrind I found several memory-related bugs (leaks and other errors). The following series of patches fixes most of them.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">ollydbg 2009-08-11 17:29</div>
        <div class="panel-body">
          <p>@techy</p>
          <p>Thanks!!!</p>
          <p>There are so many bug fix.</p>
          <p>By the way, it would be better if  I can use Valgrind or other related memory leak detection tool under mingw&amp;Windows.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">techy 2009-08-17 22:31</div>
        <div class="panel-body">
          <p>Concerning your last sentence, from my perspective it would be better if the developers of Code::Blocks used Linux for development instead of Windows ;-).</p>
          <p>Are the patches going to be applied to the mainline? Some of the memory leaks are really minor so they don't need to be fixed but some, like patch 2, are quite huge (you leak the whole contents of the file when switching to another file by F11 and in other cases as well) and also the memory errors should be fixed. And I'd also like to see the 2 additional patches as a part of the mainline so I don't have to apply them manually every time (and of course, other people would benefit from them as well IMO).</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mortenmacfly 2009-08-18 08:42</div>
        <div class="panel-body">
          <p>After testing they may be applied. Remember that Thomas also had some comments we need to discuss internally. So please be patient.</p>
          <p>Concerning Linux: In fact *all* devs except me develop C::B under Linux for Linux. ;-)</p>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </body>
</html>
