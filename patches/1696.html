<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 1696 - Code::Blocks History</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <link rel="stylesheet" href="../pygments.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #1696 <small>2006-12-07 10:44</small></h3>
          <h4>stahta01</h4>
          patch to the old wxSmith to use wxPropertyGrid version 1.2.x
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="1696-patch_to_the_o.patch">1696-patch_to_the_o.patch</a> (13.7 KB)</dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Plugin::Refinement</dd>
            <dt>Status</dt><dd>Closed</dd>
            <dt>Close date</dt><dd>2007-02-19 03:53 <a href="http://cb.biplab.in/websvn/log.php?sr=3615"><span class="glyphicon glyphicon-link"></span></a></dd>
            <dt>Assigned to</dt><dd>&nbsp;</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: src/plugins/contrib/wxSmith/properties/wxsenumproperty.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/contrib/wxSmith/properties/wxsenumproperty.cpp    (revision 3349)</span>
<span class="gi">+++ src/plugins/contrib/wxSmith/properties/wxsenumproperty.cpp    (working copy)</span>
<span class="gu">@@ -15,7 +15,12 @@</span>
 
 void wxsEnumProperty::AddToPropGrid(wxPropertyGrid* Grid,const wxString&amp; Name)
 {
<span class="gi">+// TODO: Verify version number 1099</span>
<span class="gi">+#if defined(wxPG_VERSION) &amp;&amp; wxPG_VERSION &gt; 1099</span>
<span class="gi">+    PGId = Grid-&gt;Append( wxEnumProperty(Name,wxPG_LABEL,Names,Values,Value) );</span>
<span class="gi">+#else</span>
     PGId = Grid-&gt;Append( wxEnumProperty(Name,wxPG_LABEL,Names,Values,0,Value) );
<span class="gi">+#endif</span>
 }
 
 bool wxsEnumProperty::PropGridChanged(wxPropertyGrid* Grid,wxPGId Id)
<span class="gh">Index: src/plugins/contrib/wxSmith/properties/wxsplacementproperty.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/contrib/wxSmith/properties/wxsplacementproperty.cpp    (revision 3349)</span>
<span class="gi">+++ src/plugins/contrib/wxSmith/properties/wxsplacementproperty.cpp    (working copy)</span>
<span class="gu">@@ -53,8 +53,12 @@</span>
         wxsSizerExtraParams::LeftCenter,
         wxsSizerExtraParams::Center
     };
<span class="gd">-</span>
<span class="gi">+// TODO: Verify version number 1099</span>
<span class="gi">+#if defined(wxPG_VERSION) &amp;&amp; wxPG_VERSION &gt; 1099</span>
<span class="gi">+    PGId = Grid-&gt;Append( wxEnumProperty(Name,wxPG_LABEL,Placements,Values,PlacementType) );</span>
<span class="gi">+#else</span>
     PGId = Grid-&gt;Append( wxEnumProperty(Name,wxPG_LABEL,Placements,Values,0,PlacementType) );
<span class="gi">+#endif</span>
     ExpandId = Grid-&gt;Append( wxBoolProperty(ExpandName, wxPG_LABEL, Expand ) );
     ShapedId = Grid-&gt;Append( wxBoolProperty(ShapedName, wxPG_LABEL, Shaped ) );
     Grid-&gt;SetPropertyAttribute(ExpandId,wxPG_BOOL_USE_CHECKBOX,(long)1,wxRECURSE);
<span class="gh">Index: src/plugins/contrib/wxSmith/properties/wxsborderproperty.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/contrib/wxSmith/properties/wxsborderproperty.cpp    (revision 3349)</span>
<span class="gi">+++ src/plugins/contrib/wxSmith/properties/wxsborderproperty.cpp    (working copy)</span>
<span class="gu">@@ -32,7 +32,12 @@</span>
         wxsSizerExtraParams::Bottom
     };
 
<span class="gi">+// TODO: Verify version number 1099</span>
<span class="gi">+#if defined(wxPG_VERSION) &amp;&amp; wxPG_VERSION &gt; 1099</span>
<span class="gi">+    PGId = Grid-&gt;Append(wxFlagsProperty(Name,wxPG_LABEL,Borders,Values,BorderFlags));</span>
<span class="gi">+#else</span>
     PGId = Grid-&gt;Append(wxFlagsProperty(Name,wxPG_LABEL,Borders,Values,0,BorderFlags));
<span class="gi">+#endif</span>
     Grid-&gt;SetPropertyAttribute(PGId,wxPG_BOOL_USE_CHECKBOX,(long)1,wxRECURSE);
 }
 
<span class="gh">Index: src/plugins/contrib/wxSmith/properties/wxsadvimageproperty.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/contrib/wxSmith/properties/wxsadvimageproperty.cpp    (revision 3349)</span>
<span class="gi">+++ src/plugins/contrib/wxSmith/properties/wxsadvimageproperty.cpp    (working copy)</span>
<span class="gu">@@ -1,3 +1,15 @@</span>
<span class="gi">+// -----------------------------------------------------------------------</span>
<span class="gi">+// Name:        wxsadvimageproperty.cpp</span>
<span class="gi">+// Purpose:     wxSmith support code</span>
<span class="gi">+// Author:      byo</span>
<span class="gi">+// Modified by:</span>
<span class="gi">+// Created:</span>
<span class="gi">+// Copyright:</span>
<span class="gi">+// Licence:</span>
<span class="gi">+//</span>
<span class="gi">+// -----------------------------------------------------------------------</span>
<span class="gi">+</span>
<span class="gi">+</span>
 //#include &quot;../wxsheaders.h&quot;
 #include &quot;wxsadvimageproperty.h&quot;
 
<span class="gu">@@ -4,6 +16,280 @@</span>
 #include &lt;wx/intl.h&gt;
 
 #ifndef __NO_PROPGRGID
<span class="gi">+</span>
<span class="gi">+#if defined(wxPG_VERSION)</span>
<span class="gi">+// Assume using new wxPropertyGrid that does NOT contain wxAdvImageFileProperty</span>
<span class="gi">+</span>
<span class="gi">+// -----------------------------------------------------------------------</span>
<span class="gi">+// wxAdvImageFilePropertyClass was snipped from code in propgridsample.cpp</span>
<span class="gi">+//</span>
<span class="gi">+// Purpose:     Sample Code</span>
<span class="gi">+// Author:      Jaakko Salli</span>
<span class="gi">+// Modified by:</span>
<span class="gi">+// Created:     Sep-25-2004</span>
<span class="gi">+// RCS-ID:      $Id:</span>
<span class="gi">+// Copyright:   (c) Jaakko Salli</span>
<span class="gi">+// Licence:     wxWindows license</span>
<span class="gi">+//</span>
<span class="gi">+// -----------------------------------------------------------------------</span>
<span class="gi">+</span>
<span class="gi">+class wxMyImageInfo;</span>
<span class="gi">+</span>
<span class="gi">+WX_DECLARE_OBJARRAY(wxMyImageInfo, wxArrayMyImageInfo);</span>
<span class="gi">+</span>
<span class="gi">+#include &lt;wx/arrimpl.cpp&gt;</span>
<span class="gi">+WX_DEFINE_OBJARRAY(wxArrayMyImageInfo);</span>
<span class="gi">+</span>
<span class="gi">+wxArrayString       g_myImageNames;</span>
<span class="gi">+wxArrayMyImageInfo  g_myImageArray;</span>
<span class="gi">+</span>
<span class="gi">+WX_PG_IMPLEMENT_PROPERTY_CLASS(wxAdvImageFileProperty,wxFileProperty,</span>
<span class="gi">+                               wxString,const wxString&amp;,ChoiceAndButton)</span>
<span class="gi">+</span>
<span class="gi">+wxAdvImageFilePropertyClass::wxAdvImageFilePropertyClass ( const wxString&amp; label,</span>
<span class="gi">+    const wxString&amp; name, const wxString&amp; value)</span>
<span class="gi">+    : wxFilePropertyClass(label,name,value)</span>
<span class="gi">+{</span>
<span class="gi">+    m_wildcard = wxPGGetDefaultImageWildcard();</span>
<span class="gi">+</span>
<span class="gi">+    m_index = -1;</span>
<span class="gi">+</span>
<span class="gi">+    m_pImage = (wxImage*) NULL;</span>
<span class="gi">+</span>
<span class="gi">+    m_flags &amp;= ~(wxPG_PROP_SHOW_FULL_FILENAME);</span>
<span class="gi">+</span>
<span class="gi">+}</span>
<span class="gi">+</span>
<span class="gi">+wxAdvImageFilePropertyClass::~wxAdvImageFilePropertyClass ()</span>
<span class="gi">+{</span>
<span class="gi">+    // Delete old image</span>
<span class="gi">+    if ( m_pImage )</span>
<span class="gi">+    {</span>
<span class="gi">+        delete m_pImage;</span>
<span class="gi">+        m_pImage = (wxImage*) NULL;</span>
<span class="gi">+    }</span>
<span class="gi">+}</span>
<span class="gi">+</span>
<span class="gi">+void wxAdvImageFilePropertyClass::DoSetValue ( wxPGVariant value )</span>
<span class="gi">+{</span>
<span class="gi">+    wxFilePropertyClass::DoSetValue(value);</span>
<span class="gi">+</span>
<span class="gi">+    // Delete old image</span>
<span class="gi">+    if ( m_pImage )</span>
<span class="gi">+    {</span>
<span class="gi">+        delete m_pImage;</span>
<span class="gi">+        m_pImage = (wxImage*) NULL;</span>
<span class="gi">+    }</span>
<span class="gi">+</span>
<span class="gi">+   // Customized by cyberkoa to get the value as full path</span>
<span class="gi">+     wxString imagename = GetVa</span>
<em><strong>file truncated...</strong></em>
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">stahta01 2006-12-07 11:34</div>
        <div class="panel-body">
          <p>I am working on patch to upgrade wxPropertyGrid to version 1.2.x; likely version 1.2.5 when it is finished.</p>
          <p>See CodeBlocks forum thread <a href="http://forums.codeblocks.org/index.php?topic=4638.0">http://forums.codeblocks.org/index.php?topic=4638.0</a></p>
          <p>Tim S</p>
          <p>Note: forgot to patch unix cbp files.</p>
          <p>WXMAKINGLIB_PROPGRID makes wxPropertyGrid into static library</p>
          <p>wxPG_USE_WXMODULE=0 turns off the use of wxWidgets wxModule; the use wxModule was causing wxSmith to crash.</p>
          <p>wxPG_COMPATIBILITY_1_0_0 turns on 1.0.0 compatibility mode; this should be removed and the errors fixed.</p>
          <p>#defines needed in target wxPropertyGrid</p>
          <p>WXMAKINGLIB_PROPGRID</p>
          <p>wxPG_USE_WXMODULE=0</p>
          <p>wxPG_COMPATIBILITY_1_0_0</p>
          <p>#defines needed in project wxSmith (old)</p>
          <p>WXMAKINGLIB_PROPGRID</p>
          <p>wxPG_COMPATIBILITY_1_0_0</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">stahta01 2007-01-30 00:45</div>
        <div class="panel-body">
          <p>This patch can be closed since the old wxSmith is no longer being used. Tim S</p>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>