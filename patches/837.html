<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 837 - Code::Blocks History</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <link rel="stylesheet" href="../pygments.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #837 <small>2006-02-15 19:03:22</small></h3>
          <h4>mortenmacfly</h4>
          Enhancement for compiler interface GUI: Clear buttons
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="837-Enhancement_for.patch">837-Enhancement_for.patch</a></dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::Refinement</dd>
            <dt>Status</dt><dd>Accepted</dd>
            <dt>Close date</dt><dd>2006-02-16 09:40:05</dd>
            <dt>Assigned to</dt><dd>&nbsp;</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: plugins/compilergcc/compileroptionsdlg.h</span>
<span class="gh">===================================================================</span>
<span class="gd">--- plugins/compilergcc/compileroptionsdlg.h    (revision 2006)</span>
<span class="gi">+++ plugins/compilergcc/compileroptionsdlg.h    (working copy)</span>
<span class="gu">@@ -67,9 +67,11 @@</span>
         void OnAddDirClick(wxCommandEvent&amp; event);
         void OnEditDirClick(wxCommandEvent&amp; event);
         void OnRemoveDirClick(wxCommandEvent&amp; event);
<span class="gi">+        void OnClearDirClick(wxCommandEvent&amp; event);</span>
         void OnAddVarClick(wxCommandEvent&amp; event);
         void OnEditVarClick(wxCommandEvent&amp; event);
         void OnRemoveVarClick(wxCommandEvent&amp; event);
<span class="gi">+        void OnClearVarClick(wxCommandEvent&amp; event);</span>
         void OnSetDefaultCompilerClick(wxCommandEvent&amp; event);
         void OnAddCompilerClick(wxCommandEvent&amp; event);
         void OnEditCompilerClick(wxCommandEvent&amp; event);
<span class="gh">Index: plugins/compilergcc/compileroptionsdlg.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- plugins/compilergcc/compileroptionsdlg.cpp    (revision 2006)</span>
<span class="gi">+++ plugins/compilergcc/compileroptionsdlg.cpp    (working copy)</span>
<span class="gu">@@ -43,9 +43,11 @@</span>
 BEGIN_EVENT_TABLE(CompilerOptionsDlg, wxPanel)
     EVT_UPDATE_UI(            XRCID(&quot;btnEditDir&quot;),        CompilerOptionsDlg::OnUpdateUI)
     EVT_UPDATE_UI(            XRCID(&quot;btnDelDir&quot;),            CompilerOptionsDlg::OnUpdateUI)
<span class="gi">+    EVT_UPDATE_UI(            XRCID(&quot;btnClearDir&quot;),            CompilerOptionsDlg::OnUpdateUI)</span>
     EVT_UPDATE_UI(            XRCID(&quot;spnDirs&quot;),            CompilerOptionsDlg::OnUpdateUI)
     EVT_UPDATE_UI(            XRCID(&quot;btnEditVar&quot;),        CompilerOptionsDlg::OnUpdateUI)
     EVT_UPDATE_UI(            XRCID(&quot;btnDeleteVar&quot;),        CompilerOptionsDlg::OnUpdateUI)
<span class="gi">+    EVT_UPDATE_UI(            XRCID(&quot;btnClearVar&quot;),        CompilerOptionsDlg::OnUpdateUI)</span>
     EVT_UPDATE_UI(            XRCID(&quot;cmbCompilerPolicy&quot;),    CompilerOptionsDlg::OnUpdateUI)
     EVT_UPDATE_UI(            XRCID(&quot;cmbLinkerPolicy&quot;),    CompilerOptionsDlg::OnUpdateUI)
     EVT_UPDATE_UI(            XRCID(&quot;cmbIncludesPolicy&quot;),    CompilerOptionsDlg::OnUpdateUI)
<span class="gu">@@ -97,6 +99,7 @@</span>
     EVT_LISTBOX_DCLICK(        XRCID(&quot;lstLibDirs&quot;),        CompilerOptionsDlg::OnEditDirClick)
     EVT_LISTBOX_DCLICK(        XRCID(&quot;lstResDirs&quot;),        CompilerOptionsDlg::OnEditDirClick)
     EVT_BUTTON(                XRCID(&quot;btnDelDir&quot;),            CompilerOptionsDlg::OnRemoveDirClick)
<span class="gi">+    EVT_BUTTON(                XRCID(&quot;btnClearDir&quot;),            CompilerOptionsDlg::OnClearDirClick)</span>
     EVT_BUTTON(                XRCID(&quot;btnAddLib&quot;),            CompilerOptionsDlg::OnAddLibClick)
     EVT_BUTTON(                XRCID(&quot;btnEditLib&quot;),        CompilerOptionsDlg::OnEditLibClick)
     EVT_LISTBOX_DCLICK(        XRCID(&quot;lstLibs&quot;),           CompilerOptionsDlg::OnEditLibClick)
<span class="gu">@@ -112,6 +115,7 @@</span>
     EVT_BUTTON(                XRCID(&quot;btnAddVar&quot;),            CompilerOptionsDlg::OnAddVarClick)
     EVT_BUTTON(                XRCID(&quot;btnEditVar&quot;),        CompilerOptionsDlg::OnEditVarClick)
     EVT_BUTTON(                XRCID(&quot;btnDeleteVar&quot;),        CompilerOptionsDlg::OnRemoveVarClick)
<span class="gi">+    EVT_BUTTON(                XRCID(&quot;btnClearVar&quot;),        CompilerOptionsDlg::OnClearVarClick)</span>
     EVT_BUTTON(                XRCID(&quot;btnMasterPath&quot;),        CompilerOptionsDlg::OnMasterPathClick)
     EVT_BUTTON(                XRCID(&quot;btnAutoDetect&quot;),        CompilerOptionsDlg::OnAutoDetectClick)
     EVT_BUTTON(                XRCID(&quot;btnCcompiler&quot;),        CompilerOptionsDlg::OnSelectProgramClick)
<span class="gu">@@ -1074,6 +1078,19 @@</span>
     }
 }
 
<span class="gi">+void CompilerOptionsDlg::OnClearDirClick(wxCommandEvent&amp; event)</span>
<span class="gi">+{</span>
<span class="gi">+    wxListBox* control = GetDirsListBox();</span>
<span class="gi">+    if (!control || control-&gt;GetSelection() &lt; 0)</span>
<span class="gi">+        return;</span>
<span class="gi">+    if (cbMessageBox(_(&quot;Remove all directories from the list?&quot;),</span>
<span class="gi">+                    _(&quot;Confirmation&quot;),</span>
<span class="gi">+                    wxOK | wxCANCEL | wxICON_QUESTION) == wxID_OK)</span>
<span class="gi">+    {</span>
<span class="gi">+        control-&gt;Clear();</span>
<span class="gi">+    }</span>
<span class="gi">+}</span>
<span class="gi">+</span>
 void CompilerOptionsDlg::OnAddVarClick(wxCommandEvent&amp; event)
 {
     CompileOptionsBase* base = GetVarsOwner();
<span class="gu">@@ -1145,6 +1162,32 @@</span>
     }
 }
 
<span class="gi">+void CompilerOptionsDlg::OnClearVarClick(wxCommandEvent&amp; event)</span>
<span class="gi">+{</span>
<span class="gi">+    wxListBox* lstVars = XRCCTRL(*this, &quot;lstVars&quot;, wxListBox);</span>
<span class="gi">+    if (lstVars-&gt;IsEmpty())</span>
<span class="gi">+        return;</span>
<span class="gi">+</span>
<span class="gi">+  CompileOptionsBase* base = GetVarsOwner();</span>
<span class="gi">+  if (!base)</span>
<span class="gi">+    return;</span>
<span class="gi">+</span>
<span class="gi">+    if (cbMessageBox(_(&quot;Are you sure you want to clear all variables?&quot;),</span>
<span class="gi">+                   _(&quot;Confirmation&quot;),</span>
<span class="gi">+                   wxYES | wxNO | wxICON_QUESTION) == wxID_YES)</span>
<span class="gi">+    {</span>
<span class="gi">+    // Unset all variables of lstVars</span>
<span class="gi">+    for (int i=0; i&lt;lstVars-&gt;GetCount(); i++)</span>
<span class="gi">+    {</span>
<span class="gi">+      wxString key = lstVars-&gt;GetString(i).BeforeFirst(_T(&#39;=&#39;)).Trim(true);</span>
<span class="gi">+      if (!key.IsEmpty())</span>
<span class="gi">+        base-&gt;UnsetVar(key);</span>
<span class="gi">+    }</span>
<span class="gi">+</span>
<span class="gi">+    lstVars-&gt;Clear();</span>
<span class="gi">+    }</span>
<span class="gi">+}</span>
<span class="gi">+</span>
 void CompilerOptionsDlg::OnSetDefaultCompilerClick(wxCommandEvent&amp; event)
 {
     wxComboBox* cmb = XRCCTRL(*this, &quot;cmbCompiler&quot;, wxComboBox);
<span class="gu">@@ -1542,10 +1585,11 @@</span>
<em><strong>file truncated...</strong></em>
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">mortenmacfly 2006-02-15 19:04:58</div>
        <div class="panel-body">
          <p>Based on the "clear patch" here: <a href="http://forums.codeblocks.org/index.php?topic=2332.0?">http://forums.codeblocks.org/index.php?topic=2332.0?</a></p>
          <p>In addition I've prepared another patch that adds the same buttons (clear) to the other compiler settings listboxes as well (where it is appropriate).</p>
          <p>I am open for dicussions on this: I think (for me) the most important was the clear for the libraries. But if you think of the same situation as described in the post stated above, the clear buttons for the other elements might be useful as well. Furthermore this leads to a more "consistent" GUI. If you agree you might inspect/apply the patch then... Do you agree?</p>
          <p>I have used the SVN diff, the patch is at least compatible to revision 2006-2012.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mandrav 2006-02-16 09:40:05</div>
        <div class="panel-body">
          <p>Patch applied. Thank you.</p>
          <p>Although you forgot to do it for "Programs/Additional paths" ;)</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mortenmacfly 2006-02-16 12:34:56</div>
        <div class="panel-body">
          <p>&gt; Although you forgot to do it for "Programs/Additional paths" ;)</p>
          <p>Ooops - you are right. I missed that becasue I was focusing on the GUI that appears if you choose the "Build options" of a project. I have added another patch though BerliOS to fix that. Sorry.</p>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>