<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 2829 - Code::Blocks History</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #2829 <small>2009-09-20 17:06</small></h3>
          <h4>jose_maria0</h4>
          Fixes <a href="../bugs/11208.html" data-toggle="tooltip" title="doesn't jump to a file/line from call stack">Bug #11208</a>
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="2829-Fixes_Bug_1120.patch">2829-Fixes_Bug_1120.patch</a> (4.0 KB)</dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Plugin::Bugfix</dd>
            <dt>Status</dt><dd>Rejected</dd>
            <dt>Close date</dt><dd>2013-09-20 09:50</dd>
            <dt>Assigned to</dt><dd>mortenmacfly</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: debian/changelog</span>
<span class="gh">===================================================================</span>
<span class="gd">--- debian/changelog    (revisiÃ³n: 5813)</span>
<span class="gi">+++ debian/changelog    (copia de trabajo)</span>
<span class="gu">@@ -1,4 +1,4 @@</span>
<span class="gd">-codeblocks (8.02svn5670) unstable; urgency=low</span>
<span class="gi">+codeblocks (8.02svn5813) unstable; urgency=low</span>
 
   * more fixes to debian build system, sources and packages are now
     lintian-clean, except for some words guessed as spelling-errors.
<span class="gh">Index: src/plugins/debuggergdb/debuggergdb.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/debuggergdb/debuggergdb.cpp    (revisiÃ³n: 5813)</span>
<span class="gi">+++ src/plugins/debuggergdb/debuggergdb.cpp    (copia de trabajo)</span>
<span class="gu">@@ -2189,22 +2189,39 @@</span>
     cbProject* project = Manager::Get()-&gt;GetProjectManager()-&gt;GetActiveProject();
     ProjectFile* f = project ? project-&gt;GetFileByFilename(filename, false, true) : 0;
     wxFileName fname(filename);
<span class="gd">-    if (project &amp;&amp; fname.IsRelative())</span>
<span class="gd">-        fname.MakeAbsolute(project-&gt;GetBasePath());</span>
<span class="gd">-    // gdb can&#39;t work with spaces in filenames, so we have passed it the shorthand form (C:\MYDOCU~1 etc)</span>
<span class="gd">-    // revert this change now so the file can be located and opened...</span>
<span class="gd">-    // we do this by calling GetLongPath()</span>
<span class="gd">-    cbEditor* ed = Manager::Get()-&gt;GetEditorManager()-&gt;Open(fname.GetLongPath());</span>
<span class="gd">-    if (ed)</span>
<span class="gi">+ //JMP</span>
<span class="gi">+    wxArrayString pdirs;</span>
<span class="gi">+    if ( project )</span>
<span class="gi">+        pdirs = GetSearchDirs( project );</span>
<span class="gi">+</span>
<span class="gi">+    if ( pdirs.GetCount() == 0 )</span>
<span class="gi">+       pdirs.Add( wxEmptyString );</span>
<span class="gi">+</span>
<span class="gi">+    bool bFound = false;</span>
<span class="gi">+</span>
<span class="gi">+    for ( size_t i = 0; i &lt; pdirs.GetCount(); i++ )</span>
     {
<span class="gd">-        ed-&gt;Show(true);</span>
<span class="gd">-        if (f &amp;&amp; !ed-&gt;GetProjectFile())</span>
<span class="gd">-            ed-&gt;SetProjectFile(f);</span>
<span class="gd">-        ed-&gt;GotoLine(line - 1, false);</span>
<span class="gd">-        if (setMarker)</span>
<span class="gd">-            ed-&gt;SetDebugLine(line - 1);</span>
<span class="gi">+        wxFileName fname(filename);</span>
<span class="gi">+        if (fname.IsRelative())</span>
<span class="gi">+            fname.MakeAbsolute(pdirs[i]);</span>
<span class="gi">+       // gdb can&#39;t work with spaces in filenames, so we have passed it the shorthand form (C:\MYDOCU~1 etc)</span>
<span class="gi">+       // revert this change now so the file can be located and opened...</span>
<span class="gi">+       // we do this by calling GetLongPath()</span>
<span class="gi">+       cbEditor* ed = Manager::Get()-&gt;GetEditorManager()-&gt;Open(fname.GetLongPath());</span>
<span class="gi">+       if (ed)</span>
<span class="gi">+       {</span>
<span class="gi">+            bFound = true;</span>
<span class="gi">+            ed-&gt;Show(true);</span>
<span class="gi">+            if (f &amp;&amp; !ed-&gt;GetProjectFile())</span>
<span class="gi">+                ed-&gt;SetProjectFile(f);</span>
<span class="gi">+            ed-&gt;GotoLine(line - 1, false);</span>
<span class="gi">+            if (setMarker)</span>
<span class="gi">+                ed-&gt;SetDebugLine(line - 1);</span>
<span class="gi">+            break;</span>
<span class="gi">+       }</span>
     }
<span class="gd">-    else</span>
<span class="gi">+</span>
<span class="gi">+    if ( !bFound )</span>
         Log(_(&quot;Cannot open file: &quot;) + fname.GetLongPath());
 }
 
<span class="gh">Index: src/CodeBlocks-unix.cbp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/CodeBlocks-unix.cbp    (revisiÃ³n: 5813)</span>
<span class="gi">+++ src/CodeBlocks-unix.cbp    (copia de trabajo)</span>
<span class="gu">@@ -138,7 +138,7 @@</span>
                 &lt;Option working_dir=&quot;devel&quot; /&gt;
                 &lt;Option type=&quot;0&quot; /&gt;
                 &lt;Option compiler=&quot;gcc&quot; /&gt;
<span class="gd">-                &lt;Option parameters=&quot;--debug-log -ns -ni&quot; /&gt;</span>
<span class="gi">+                &lt;Option parameters=&quot;--debug-log -ns -ni --prefix=/home/jose/Aplicaciones/codeblocks-SVN/trunk/src/devel&quot; /&gt;</span>
                 &lt;Option projectLinkerOptionsRelation=&quot;2&quot; /&gt;
                 &lt;Option projectIncludeDirsRelation=&quot;2&quot; /&gt;
                 &lt;Option projectResourceIncludeDirsRelation=&quot;0&quot; /&gt;
<span class="gu">@@ -380,8 +380,8 @@</span>
             &lt;Add alias=&quot;Third-party libs&quot; targets=&quot;tinyXML;AutoRevision;ConsoleRunner;Squirrel;Squirrel std library;SqPlus;scintilla;&quot; /&gt;
         &lt;/VirtualTargets&gt;
         &lt;Compiler&gt;
<span class="gi">+            &lt;Add option=&quot;-O3&quot; /&gt;</span>
             &lt;Add option=&quot;-Wall&quot; /&gt;
<span class="gd">-            &lt;Add option=&quot;-g&quot; /&gt;</span>
             &lt;Add option=&quot;`wx-config --cflags`&quot; /&gt;
             &lt;Add option=&quot;-fmessage-length=0&quot; /&gt;
             &lt;Add option=&quot;-fexceptions&quot; /&gt;
<span class="gu">@@ -3440,7 +3440,9 @@</span>
                     &lt;wxPanel wxs=&quot;wxsmith/EmbeddedHtmlPanel.wxs&quot; src=&quot;plugins/defaultmimehandler/EmbeddedHtmlPanel.cpp&quot; hdr=&quot;plugins/defaultmimehandler/EmbeddedHtmlPanel.h&quot; fwddecl=&quot;1&quot; name=&quot;EmbeddedHtmlPanel&quot; language=&quot;CPP&quot; /&gt;
                 &lt;/resources&gt;
             &lt;/wxsmith&gt;
<span class="gd">-            &lt;debugger /&gt;</span>
<span class="gi">+            &lt;debugger&gt;</span>
<span class="gi">+                &lt;search_path add=&quot;/home/jose/Aplicaciones/codeblocks-SVN/trunk/src/&quot; /&gt;</span>
<span class="gi">+            &lt;/debugger&gt;</span>
         &lt;/Extensions&gt;
     &lt;/Project&gt;
 &lt;/CodeBlocks_project_file&gt;
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">mortenmacfly 2010-08-17 05:17</div>
        <div class="panel-body">
          <p>In fact this patch doesn't fix anything, it makes it even worse. After applying this patch I was simple unable to debug *any* application (even a simple "Hello World") that resides in a path with a format other that 8.3. For example:</p>
          <p>My project folder:</p>
          <p>D:\EigeneDateien\Projekte</p>
          <p>...becomes:</p>
          <p>D:/EIGENE~1/Projekte</p>
          <p>...which breaks debugging. Notice that there was NO space in the path. So in fact this is not a clever thing to do. After reverting your patch everything went back to normal.</p>
          <p>I wonder why it worked for you at all...?! Did I miss something?</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mortenmacfly 2013-09-20 09:50</div>
        <div class="panel-body">
          <p>No answer -&gt; closing as it is invalid.</p>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function() {
        $("body").tooltip({ selector: '[data-toggle=tooltip]' });
      });
    </script>
  </body>
</html>
