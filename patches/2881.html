<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 2881 - Code::Blocks History</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../pygments.css">
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #2881 <small>2009-12-27 19:29</small></h3>
          <h4>techy</h4>
          Remove the wizardry that loads CBTreeCtrl (debug9)
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="2881-Remove_the_wiz.patch">2881-Remove_the_wiz.patch</a> (2.1 KB)</dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::Bugfix</dd>
            <dt>Status</dt><dd>Accepted</dd>
            <dt>Close date</dt><dd>2009-12-31 16:51 <a href="http://cb.biplab.in/websvn/log.php?sr=6014"><span class="glyphicon glyphicon-link"></span></a></dd>
            <dt>Assigned to</dt><dd>mortenmacfly</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: src/plugins/codecompletion/resources/classbrowser.xrc</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/codecompletion/resources/classbrowser.xrc    (revision 5986)</span>
<span class="gi">+++ src/plugins/codecompletion/resources/classbrowser.xrc    (working copy)</span>
<span class="gu">@@ -54,10 +54,10 @@</span>
                             &lt;object class=&quot;wxSplitterWindow&quot; name=&quot;splitterWin&quot;&gt;
                                 &lt;minsize&gt;64&lt;/minsize&gt;
                                 &lt;style&gt;wxSP_LIVE_UPDATE&lt;/style&gt;
<span class="gd">-                                &lt;object class=&quot;wxTreeCtrl&quot; name=&quot;treeAll&quot;&gt;</span>
<span class="gi">+                                &lt;object class=&quot;wxTreeCtrl&quot; name=&quot;treeAll&quot; subclass=&quot;CBTreeCtrl&quot;&gt;</span>
                                     &lt;style&gt;wxTR_HAS_VARIABLE_ROW_HEIGHT|wxTR_DEFAULT_STYLE&lt;/style&gt;
                                 &lt;/object&gt;
<span class="gd">-                                &lt;object class=&quot;wxTreeCtrl&quot; name=&quot;treeMembers&quot;&gt;</span>
<span class="gi">+                                &lt;object class=&quot;wxTreeCtrl&quot; name=&quot;treeMembers&quot; subclass=&quot;CBTreeCtrl&quot;&gt;</span>
                                     &lt;style&gt;wxTR_HAS_BUTTONS|wxTR_NO_LINES|wxTR_HIDE_ROOT|wxTR_HAS_VARIABLE_ROW_HEIGHT&lt;/style&gt;
                                 &lt;/object&gt;
                             &lt;/object&gt;
<span class="gh">Index: src/plugins/codecompletion/classbrowser.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/codecompletion/classbrowser.cpp    (revision 5986)</span>
<span class="gi">+++ src/plugins/codecompletion/classbrowser.cpp    (working copy)</span>
<span class="gu">@@ -113,19 +113,10 @@</span>
     if (platform::windows)
         m_Search-&gt;SetWindowStyle(wxTE_PROCESS_ENTER); // it&#39;s a must on windows to catch EVT_TEXT_ENTER
 
<span class="gi">+    m_Tree = XRCCTRL(*this, &quot;treeAll&quot;, CBTreeCtrl);</span>
 
<span class="gd">-    wxTreeCtrl* tmp = XRCCTRL(*this, &quot;treeAll&quot;, CBTreeCtrl);</span>
<span class="gd">-    wxSplitterWindow* winTmp = (wxSplitterWindow*)tmp-&gt;GetParent();</span>
<span class="gi">+    m_TreeBottom = XRCCTRL(*this, &quot;treeMembers&quot;, CBTreeCtrl);</span>
 
<span class="gd">-    m_Tree = new CBTreeCtrl(tmp-&gt;GetParent(), tmp-&gt;GetId(), tmp-&gt;GetPosition(), tmp-&gt;GetSize(), tmp-&gt;GetWindowStyleFlag());</span>
<span class="gd">-    winTmp-&gt;ReplaceWindow(tmp, m_Tree);</span>
<span class="gd">-    delete tmp;</span>
<span class="gd">-</span>
<span class="gd">-    tmp = XRCCTRL(*this, &quot;treeMembers&quot;, CBTreeCtrl);</span>
<span class="gd">-    m_TreeBottom = new CBTreeCtrl(tmp-&gt;GetParent(), tmp-&gt;GetId(), tmp-&gt;GetPosition(), tmp-&gt;GetSize(), tmp-&gt;GetWindowStyleFlag());</span>
<span class="gd">-    winTmp-&gt;ReplaceWindow(tmp, m_TreeBottom);</span>
<span class="gd">-    delete tmp;</span>
<span class="gd">-</span>
     int filter = cfg-&gt;ReadInt(_T(&quot;/browser_display_filter&quot;), bdfWorkspace);
     XRCCTRL(*this, &quot;cmbView&quot;, wxChoice)-&gt;SetSelection(filter);
 
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">techy 2009-12-27 21:04</div>
        <div class="panel-body">
          <p>Right now codeblocks does a crazy thing when getting treeAll and treeMembers (which are of type CBTreeCtrl, which is a subclass of wxTreeCtrl) from the resource file - in the resource file they are declared as wxTreeCtrl, then loaded by XRCCTRL as CBTreeCtrl and then somehow replaced with an instance of CBTreeCtrl (this thing was introduced in rev. 5872). This patch does it correctly as described here:</p>
          <p><a href="http://wiki.wxwidgets.org/Resource_Files">http://wiki.wxwidgets.org/Resource_Files</a></p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mortenmacfly 2009-12-28 19:43</div>
        <div class="panel-body">
          <p>Wow! Amazing gotcha... That is *really* a good one.</p>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </body>
</html>
