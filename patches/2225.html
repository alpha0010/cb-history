<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 2225 - Code::Blocks History</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <link rel="stylesheet" href="../pygments.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #2225 <small>2007-11-04 10:19:29</small></h3>
          <h4>jenslody</h4>
          makes gdb stop at first instruction in  main on linux
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="2225-makes_gdb_stop.patch">2225-makes_gdb_stop.patch</a></dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Plugin::Bugfix</dd>
            <dt>Status</dt><dd>Accepted</dd>
            <dt>Close date</dt><dd>2007-11-05 08:49:06</dd>
            <dt>Assigned to</dt><dd>&nbsp;</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gd">--- cb-orig/src/plugins/debuggergdb/gdb_driver.cpp      2007-10-27 21:29:40.000000000 +0200</span>
<span class="gi">+++ cb-patch/src/plugins/debuggergdb/gdb_driver.cpp     2007-10-28 04:02:19.000000000 +0100</span>
<span class="gu">@@ -456,7 +456,16 @@</span>
         if (!Manager::Get()-&gt;GetConfigManager(_T(&quot;debugger&quot;))-&gt;ReadBool(_T(&quot;do_not_run&quot;), false))
         {
             // start the process
<span class="gd">-            QueueCommand(new DebuggerCmd(this, remoteDebugging ? _T(&quot;continue&quot;) : _T(&quot;start&quot;)));</span>
<span class="gi">+            if(breakOnEntry)</span>
<span class="gi">+            {</span>
<span class="gi">+                QueueCommand(new DebuggerCmd(this, remoteDebugging ? _T(&quot;continue&quot;) : _T(&quot;start&quot;)));</span>
<span class="gi">+            }</span>
<span class="gi">+            else</span>
<span class="gi">+            {</span>
<span class="gi">+                // if breakOnEntry is not set, we need to use &#39;run&#39; to make gdb stop at a breakpoint at first instruction</span>
<span class="gi">+                m_ManualBreakOnEntry=false;  // must be reset or gdb does not stop at first breakpoint</span>
<span class="gi">+                QueueCommand(new DebuggerCmd(this, remoteDebugging ? _T(&quot;continue&quot;) : _T(&quot;run&quot;)));</span>
<span class="gi">+            }</span>
             m_IsStarted = true;
         }
     }
<span class="gu">@@ -971,13 +980,15 @@</span>
     {
         if (m_ManualBreakOnEntry)
         {
<span class="gd">-            m_ManualBreakOnEntry = false;</span>
             QueueCommand(new GdbCmd_InfoProgram(this), DebuggerDriver::High);
<span class="gd">-            if (!m_BreakOnEntry)</span>
<span class="gd">-                Continue();</span>
<span class="gi">+        }</span>
<span class="gi">+        if (m_ManualBreakOnEntry &amp;&amp; !m_BreakOnEntry)</span>
<span class="gi">+        {</span>
<span class="gi">+            Continue();</span>
         }
         else
         {
<span class="gi">+            m_ManualBreakOnEntry = false;</span>
             wxString lineStr;
             if(platform::windows)
             {
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">jenslody 2007-11-04 10:26:46</div>
        <div class="panel-body">
          <p>If a breakpoint is set at first instruction, gdb does not stop there on Linux (and maybe other ports except on windows), and if stepped into main the cursor does not change its appearence.</p>
          <p>Both is fixed by this patch.</p>
          <p>The first was reported as "sub-bug" of #11049 (called bug 2).</p>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>