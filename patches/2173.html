<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 2173 - Code::Blocks History</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <link rel="stylesheet" href="../pygments.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #2173 <small>2007-09-16 16:07</small></h3>
          <h4>buergi</h4>
          added new comment types (box-,streamcomment) to edit menu
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="2173-added_new_comm.patch">2173-added_new_comm.patch</a> (28.6 KB)</dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::FeatureAdd</dd>
            <dt>Status</dt><dd>Accepted</dd>
            <dt>Close date</dt><dd>2008-02-02 12:26 <a href="http://cb.biplab.in/websvn/log.php?sr=4858"><span class="glyphicon glyphicon-link"></span></a></dd>
            <dt>Assigned to</dt><dd>&nbsp;</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: src/src/main.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/src/main.cpp    (Revision 4590)</span>
<span class="gi">+++ src/src/main.cpp    (Arbeitskopie)</span>
<span class="gu">@@ -206,6 +206,8 @@</span>
 int idEditCommentSelected = XRCID(&quot;idEditCommentSelected&quot;);
 int idEditUncommentSelected = XRCID(&quot;idEditUncommentSelected&quot;);
 int idEditToggleCommentSelected = XRCID(&quot;idEditToggleCommentSelected&quot;);
<span class="gi">+int idEditStreamCommentSelected = XRCID(&quot;idEditStreamCommentSelected&quot;);</span>
<span class="gi">+int idEditBoxCommentSelected = XRCID(&quot;idEditBoxCommentSelected&quot;);</span>
 int idEditAutoComplete = XRCID(&quot;idEditAutoComplete&quot;);
 
 int idViewLayoutDelete = XRCID(&quot;idViewLayoutDelete&quot;);
<span class="gu">@@ -296,6 +298,8 @@</span>
     EVT_UPDATE_UI(idEditAutoComplete, MainFrame::OnEditMenuUpdateUI)
     EVT_UPDATE_UI(idEditUncommentSelected, MainFrame::OnEditMenuUpdateUI)
     EVT_UPDATE_UI(idEditToggleCommentSelected, MainFrame::OnEditMenuUpdateUI)
<span class="gi">+    EVT_UPDATE_UI(idEditStreamCommentSelected, MainFrame::OnEditMenuUpdateUI)</span>
<span class="gi">+    EVT_UPDATE_UI(idEditBoxCommentSelected, MainFrame::OnEditMenuUpdateUI)</span>
 
     EVT_UPDATE_UI(idSearchFind, MainFrame::OnSearchMenuUpdateUI)
     EVT_UPDATE_UI(idSearchFindInFiles, MainFrame::OnSearchMenuUpdateUI)
<span class="gu">@@ -408,6 +412,8 @@</span>
     EVT_MENU(idEditAutoComplete, MainFrame::OnEditAutoComplete)
     EVT_MENU(idEditUncommentSelected, MainFrame::OnEditUncommentSelected)
     EVT_MENU(idEditToggleCommentSelected, MainFrame::OnEditToggleCommentSelected)
<span class="gi">+    EVT_MENU(idEditStreamCommentSelected, MainFrame::OnEditStreamCommentSelected)</span>
<span class="gi">+    EVT_MENU(idEditBoxCommentSelected, MainFrame::OnEditBoxCommentSelected)</span>
 
     EVT_MENU(idSearchFind, MainFrame::OnSearchFind)
     EVT_MENU(idSearchFindInFiles, MainFrame::OnSearchFind)
<span class="gu">@@ -2839,81 +2845,174 @@</span>
         ed-&gt;GetControl()-&gt;SelectAll();
 }
 
<span class="gd">-wxString GetCommentToken(cbStyledTextCtrl* stc)</span>
<span class="gi">+CommentToken GetCommentToken(cbStyledTextCtrl* stc)</span>
 {
<span class="gd">-    wxString comment;</span>
<span class="gi">+    CommentToken comment;</span>
<span class="gi">+    comment.lineComment        = _T(&quot;&quot;);</span>
<span class="gi">+    comment.streamCommentStart = _T(&quot;&quot;);</span>
<span class="gi">+    comment.streamCommentEnd   = _T(&quot;&quot;);</span>
<span class="gi">+    comment.boxCommentStart    = _T(&quot;&quot;);</span>
<span class="gi">+    comment.boxCommentMid      = _T(&quot;&quot;);</span>
<span class="gi">+    comment.boxCommentEnd      = _T(&quot;&quot;);</span>
<span class="gi">+</span>
     switch(stc-&gt;GetLexer())
     {
<span class="gd">-        case wxSCI_LEX_CONTAINER: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_NULL: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_PYTHON: comment = _T(&quot;#&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_CPP: comment = _T(&quot;//&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_HTML: comment = _T(&quot;//&quot;); break; // PHP uses HTML lexer</span>
<span class="gd">-        case wxSCI_LEX_XML: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_PERL: comment = _T(&quot;#&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_SQL: comment = _T(&quot;--&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_VB: comment = _T(&quot;&#39;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_PROPERTIES: comment = _T(&quot;#&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_ERRORLIST: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_MAKEFILE: comment = _T(&quot;#&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_BATCH: comment = _T(&quot;REM &quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_XCODE: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_LATEX: comment = _T(&quot;%&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_LUA: comment = _T(&quot;--&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_DIFF: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_CONF: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_PASCAL: comment = _T(&quot;//&quot;); break;  //delphi style comments, otherwise use { } or (* and *)</span>
<span class="gd">-        case wxSCI_LEX_AVE: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_ADA: comment = _T(&quot;--&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_LISP: comment = _T(&quot;;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_RUBY: comment = _T(&quot;#&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_EIFFEL: comment = _T(&quot;--&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_EIFFELKW: comment = _T(&quot;--&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_TCL: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_NNCRONTAB: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_BULLANT: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_VBSCRIPT: comment = _T(&quot;&#39;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_BAAN: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_MATLAB: comment = _T(&quot;%&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_SCRIPTOL: comment = _T(&quot;`&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_ASM: comment = _T(&quot;#&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_CPPNOCASE: comment = _T(&quot;//&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_FORTRAN: comment = _T(&quot;!&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_CSS: comment = _T(&quot;&quot;); break; // uses /* and */</span>
<span class="gd">-        case wxSCI_LEX_POV: comment = _T(&quot;//@-&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_LOUT: comment = _T(&quot;#&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_ESCRIPT: comment = _T(&quot;&quot;); break; //couldn&#39;t find</span>
<span class="gd">-        case wxSCI_LEX_PS: comment = _T(&quot;%&quot;); break; // not sure if it&#39;s only one % or multiple</span>
<span class="gd">-        case wxSCI_LEX_NSIS: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_MMIXAL: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_CLW: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_CLWNOCASE: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_LOT: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-        case wxSCI_LEX_YAML: comment = _T(&quot;&quot;); break;</span>
<span class="gd">-</span>
<em><strong>file truncated...</strong></em>
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">buergi 2007-09-16 16:29</div>
        <div class="panel-body">
          <p>some people prefer using /**/ comments instead of //, because, as you all know only the first style is ANSI-C.</p>
          <p>so I added new comments types: box and stream comment, for all languages, which supports them.</p>
          <p>Stream-comments are using e.g. /* */ to comment the whole selection.</p>
          <p>Box-comments are using (mostly) the same characters, but the comment are always lines e.g.:</p>
          <p>/* foo</p>
          <p>* bar</p>
          <p>*/</p>
          <p>Further i changed the 'Comment' function to insert stream comments if there are no single line comments available in the current language. So this does also solve commenting problems with languages which don't support single line comments (like CSS).</p>
          <p>I also fixed the 'Uncomment' function to remove the stream comments and single line box comments (which actually are stream comments). But it cannot uncomment multi line box comments</p>
          <p>I hope there are no bugs in this patch :) it's my first one for C::B</p>
          <p>btw I added a new struct CommentToken to the main.h. perhaps such types should be declared somewhere else, sry if its the wrong place.</p>
          <p>--buergi</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">buergi 2007-09-16 16:38</div>
        <div class="panel-body">
          <p>oh btw i did not add keybindings to the new comment types, it would be useful but i didn't know which one would be the best. think this should be decided by someone else :)</p>
          <p>i would prefer Ctrl-Shift-V for stream comment, because its directly next to X and C which are the current hotkeys for (un)comment, and its currently not used.</p>
          <p>the box comment does not need a hotkey i think, because its only rarely used and Ctrl-Shift-B is already assigned.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mandrav 2007-10-31 11:29</div>
        <div class="panel-body">
          <p>Doesn't compile.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">buergi 2007-11-01 13:42</div>
        <div class="panel-body">
          <p>@mandrav for me it works, just uploaded a revised patch for the current revision(4590), i made no changes in the source code, it compiles fine, but the executable doesn't run, cause an segmentation fault occures in the AutoDetectCompilers's constructor, but that has nothing to do with my patch, it also crashes without it.</p>
          <p>i only tried if the patch worked with winxp but im very sure that it also works with linux etc. there should be no problem</p>
          <p>--buergi</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mandrav 2007-11-01 20:22</div>
        <div class="panel-body">
          <p>Will have another look. Maybe it didn't apply correctly and I didn't notice but now that you synced it to current HEAD maybe things are okay.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mandrav 2008-02-02 12:26</div>
        <div class="panel-body">
          <p>Applied, thanks :).</p>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>