<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 1538 - Code::Blocks History</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <link rel="stylesheet" href="../pygments.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #1538 <small>2006-10-08 14:16:11</small></h3>
          <h4>jthedering</h4>
          Assert failure fixes
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="1538-Assert_failure.patch">1538-Assert_failure.patch</a> (15.4 KB)</dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::Bugfix</dd>
            <dt>Status</dt><dd>Out of date</dd>
            <dt>Close date</dt><dd>2007-04-12 12:43:43</dd>
            <dt>Assigned to</dt><dd>&nbsp;</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: src/sdk/projectmanager.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/sdk/projectmanager.cpp    (Revision 3882)</span>
<span class="gi">+++ src/sdk/projectmanager.cpp    (Arbeitskopie)</span>
<span class="gu">@@ -2031,7 +2031,8 @@</span>
 void ProjectManager::OnRemoveFileFromProject(wxCommandEvent&amp; event)
 {
     wxTreeItemId sel = m_pTree-&gt;GetSelection();
<span class="gd">-    FileTreeData* ftd = (FileTreeData*)m_pTree-&gt;GetItemData(sel);</span>
<span class="gi">+    FileTreeData* ftd = NULL;</span>
<span class="gi">+    if (sel.IsOk()) ftd = (FileTreeData*)m_pTree-&gt;GetItemData(sel);</span>
     if (!ftd)
         return;
     cbProject* prj = ftd-&gt;GetProject();
<span class="gh">Index: src/sdk/editorconfigurationdlg.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/sdk/editorconfigurationdlg.cpp    (Revision 3882)</span>
<span class="gi">+++ src/sdk/editorconfigurationdlg.cpp    (Arbeitskopie)</span>
<span class="gu">@@ -282,6 +282,11 @@</span>
 void EditorConfigurationDlg::UpdateListbookImages()
 {
     wxListbook* lb = XRCCTRL(*this, &quot;nbMain&quot;, wxListbook);
<span class="gi">+    </span>
<span class="gi">+    //If this function is called while loading the dialog from XRC (imagelist not assigned yet)</span>
<span class="gi">+    if(!lb-&gt;GetImageList())</span>
<span class="gi">+        return;</span>
<span class="gi">+    </span>
     int sel = lb-&gt;GetSelection();
     // set page images according to their on/off status
     for (size_t i = 0; i &lt; IMAGES_COUNT + m_PluginPanels.GetCount(); ++i)
<span class="gh">Index: src/sdk/virtualbuildtargetsdlg.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/sdk/virtualbuildtargetsdlg.cpp    (Revision 3882)</span>
<span class="gi">+++ src/sdk/virtualbuildtargetsdlg.cpp    (Arbeitskopie)</span>
<span class="gu">@@ -39,13 +39,14 @@</span>
 
     // fill aliases
     wxArrayString virtuals = m_pProject-&gt;GetVirtualBuildTargets();
<span class="gd">-    lstAliases-&gt;Set(virtuals);</span>
<span class="gd">-    lstAliases-&gt;SetSelection(0);</span>
<span class="gi">+    lstAliases-&gt;Set(virtuals);</span>
<span class="gi">+    if (!virtuals.IsEmpty())</span>
<span class="gi">+        lstAliases-&gt;SetSelection(0);</span>
 
     // fill build targets
     for (int i = 0; i &lt; m_pProject-&gt;GetBuildTargetsCount(); ++i)
<span class="gd">-        lstTargets-&gt;Append(m_pProject-&gt;GetBuildTarget(i)-&gt;GetTitle());</span>
<span class="gd">-    CheckTargets();</span>
<span class="gi">+        lstTargets-&gt;Append(m_pProject-&gt;GetBuildTarget(i)-&gt;GetTitle());</span>
<span class="gi">+    CheckTargets();</span>
 }
 
 VirtualBuildTargetsDlg::~VirtualBuildTargetsDlg()
<span class="gh">Index: src/sdk/uservarmanager.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/sdk/uservarmanager.cpp    (Revision 3882)</span>
<span class="gi">+++ src/sdk/uservarmanager.cpp    (Arbeitskopie)</span>
<span class="gu">@@ -540,7 +540,10 @@</span>
     for(unsigned int i = 0; i &lt; builtinMembers.GetCount(); ++i)
     {
         ((wxTextCtrl*) FindWindow(builtinMembers[i]))-&gt;SetValue(cfg-&gt;Read(path + builtinMembers[i]));
<span class="gd">-        knownMembers.RemoveAt(knownMembers.Index(builtinMembers[i], false));</span>
<span class="gi">+        </span>
<span class="gi">+        int index=knownMembers.Index(builtinMembers[i], false);</span>
<span class="gi">+        if(index != wxNOT_FOUND)</span>
<span class="gi">+            knownMembers.RemoveAt(index);</span>
     }
 
     for(unsigned int i = 0; i &lt; 7; ++i)
<span class="gu">@@ -608,7 +611,7 @@</span>
     selVar-&gt;Append(vars);
 
 
<span class="gd">-    if(currentVar.IsEmpty())</span>
<span class="gi">+    if(currentVar.IsEmpty() &amp;&amp; !selVar-&gt;IsEmpty())</span>
         currentVar = selVar-&gt;GetString(0);
 
     selSet-&gt;SetStringSelection(currentSet);
<span class="gh">Index: src/plugins/debuggergdb/debuggertree.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/debuggergdb/debuggertree.cpp    (Revision 3882)</span>
<span class="gi">+++ src/plugins/debuggergdb/debuggertree.cpp    (Arbeitskopie)</span>
<span class="gu">@@ -567,7 +567,10 @@</span>
     wxMenu menu(wxEmptyString);
 
     // if we right-clicked on a pointer, add a &quot;dereference pointer&quot; entry
<span class="gd">-    wxString itemtext = m_pTree-&gt;GetItemText(id);</span>
<span class="gi">+    wxString itemtext;</span>
<span class="gi">+    if(id.IsOk())</span>
<span class="gi">+        itemtext = m_pTree-&gt;GetItemText(id);</span>
<span class="gi">+    </span>
     if (itemtext.Find(_T(&#39;*&#39;)) != wxNOT_FOUND)
     {
         menu.Append(idDereferenceValue, wxString::Format(_(&quot;Dereference pointer &#39;%s&#39;&quot;), itemtext.BeforeFirst(_T(&#39;=&#39;)).c_str()));
<span class="gu">@@ -579,12 +582,15 @@</span>
     menu.Append(idWatchThis, _(&quot;Watch &#39;*&amp;this&#39;&quot;));
 
     // we have to have a valid id for the following to be enabled
<span class="gd">-    WatchTreeData* data = dynamic_cast&lt;WatchTreeData*&gt;(m_pTree-&gt;GetItemData(id));</span>
<span class="gd">-    if (id.IsOk() &amp;&amp; // valid item</span>
<span class="gd">-        data &amp;&amp; data-&gt;m_pWatch) // *is* a watch</span>
<span class="gi">+    if (id.IsOk()) // valid item</span>
     {
<span class="gd">-        menu.Append(idEditWatch, _(&quot;&amp;Edit watch&quot;));</span>
<span class="gd">-        menu.Append(idDeleteWatch, _(&quot;&amp;Delete watch&quot;));</span>
<span class="gi">+        WatchTreeData* data = dynamic_cast&lt;WatchTreeData*&gt;(m_pTree-&gt;GetItemData(id));</span>
<span class="gi">+        </span>
<span class="gi">+        if(data &amp;&amp; data-&gt;m_pWatch) // *is* a watch</span>
<span class="gi">+        {</span>
<span class="gi">+            menu.Append(idEditWatch, _(&quot;&amp;Edit watch&quot;));</span>
<span class="gi">+            menu.Append(idDeleteWatch, _(&quot;&amp;Delete watch&quot;));</span>
<span class="gi">+        }</span>
     }
     menu.AppendSeparator();
     menu.Append(idChangeValue, _(&quot;&amp;Change value...&quot;));
<span class="gh">Index: src/plugins/codecompletion/nativeparser.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/codecompletion/nativeparser.cpp    (Revision 3882)</span>
<span class="gi">+++ src/plugins/codecompletion/nativeparser.cpp    (Arbeitskopie)</span>
<span class="gu">@@ -1132,8 +1132,9 @@</span>
             --x;
 
         if (x &gt; 0 &amp;&amp;
<span class="gd">-            (line.GetChar(x) == &#39;&gt;&#39; &amp;&amp; line.GetChar(x - 1) == &#39;-&#39;) ||</span>
<span class="gd">-            (line.GetChar(x) == &#39;:&#39; &amp;&amp; line.GetChar(x -</span>
<em><strong>file truncated...</strong></em>
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">jthedering 2006-10-08 14:31:07</div>
        <div class="panel-body">
          <p>If you apply the patches #1308, #1538 and #1539 you should be able to use codeblocks in debug mode without any assert failures (apart from those that I didn't find).</p>
          <p>Unluckily this patch changes many files, but the changes are usually very small and thus shouldn't require much testing (Most of them just check a condition).</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mandrav 2007-04-12 12:43:43</div>
        <div class="panel-body">
          <p>I know it is our fault (for taking so long to test and apply it), but this patch is now out of date (source code has changed since you submitted this patch).</p>
          <p>If possible, please re-submit it for the current svn code and since you will do that, please submit separate patches for contrib plugins because they would have to be approved by their respective authors.</p>
          <p>Thank you for your efforts.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">jthedering 2007-04-23 23:32:44</div>
        <div class="panel-body">
          <p>Thank you for your interest.</p>
          <p>This is a remade version of the patch for the latest svn code (revision 3882). I have removed the changes to the contrib plugins. I hope you can apply this patch soon now.</p>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>