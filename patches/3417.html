<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 3417 - Code::Blocks History</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../pygments.css">
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #3417 <small>2013-02-02 04:52</small></h3>
          <h4>hsolter</h4>
          Disable the definition of nullptr_t when using clang 
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="3417-Disable_the_de.patch">3417-Disable_the_de.patch</a> (600 bytes)</dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::Bugfix</dd>
            <dt>Status</dt><dd>Accepted</dd>
            <dt>Close date</dt><dd>2013-05-08 19:39 <a href="http://cb.biplab.in/websvn/log.php?sr=9061"><span class="glyphicon glyphicon-link"></span></a></dd>
            <dt>Assigned to</dt><dd>alpha0010</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: src/include/prep.h</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/include/prep.h    (revision 8813)</span>
<span class="gi">+++ src/include/prep.h    (working copy)</span>
<span class="gu">@@ -9,8 +9,12 @@</span>
 #ifndef wxMAJOR_VERSION
     #include &lt;wx/version.h&gt;
 #endif
<span class="gi">+#ifndef __has_feature</span>
<span class="gi">+    #define __has_feature(x) 0</span>
<span class="gi">+#endif</span>
 
<span class="gd">-#if !(__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 6 &amp;&amp; defined __GXX_EXPERIMENTAL_CXX0X__)</span>
<span class="gi">+#if !(__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 6 &amp;&amp; defined __GXX_EXPERIMENTAL_CXX0X__) \</span>
<span class="gi">+    &amp;&amp; !(__clang__ &amp;&amp; __has_feature(cxx_nullptr))</span>
     // it is a const object...
     const class nullptr_t
     {
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">hsolter 2013-02-02 04:55</div>
        <div class="panel-body">
          <p>Unlike g++, nullptr_t is defined when using clang in cxx mode which causes compilation problems. Patch disables the class definition and macro when using clang in cxx mode.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">hsolter 2013-02-02 05:00</div>
        <div class="panel-body">
          <p>Unlike g++, nullptr_t is defined when using clang in cxx mode which causes compilation problems. Patch disables the class definition and macro when using clang in cxx mode.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">alpha0010 2013-05-06 22:12</div>
        <div class="panel-body">
          <p>When does the problem occur?  I have previously compiled Code::Blocks with Clang, and no errors occurred from nullptr_t.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">hsolter 2013-05-07 16:44</div>
        <div class="panel-body">
          <p>You probably compiled it in c++2003 mode (the default) since the c++11 defines nullptr it gives error when -std=c++11 is defined.Patch fixs this just like the gcc.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">hsolter 2013-05-07 16:55</div>
        <div class="panel-body">
          <p>Of course the real problem is the line</p>
          <p>#define nullptr nullptr_</p>
          <p>It is a bad idea to redefine a keyword..</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">hsolter 2013-05-07 17:00</div>
        <div class="panel-body">
          <p>Of course the real problem is the line</p>
          <p>#define nullptr nullptr_</p>
          <p>It is a bad idea to redefine a keyword..</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">alpha0010 2013-05-08 19:39</div>
        <div class="panel-body">
          <p>The reason Code::Blocks (conditionally) defines nullptr is to back-port this feature for people stuck on old compilers.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">hsolter 2013-05-08 22:58</div>
        <div class="panel-body">
          <p>Of course I knew that. I was just pointing out the line that causes the problem in c++11 mode</p>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </body>
</html>
