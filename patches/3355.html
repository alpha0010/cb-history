<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patch 3355 - Code::Blocks History</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../pygments.css">
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li class="active"><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Patch #3355 <small>2012-11-01 14:20</small></h3>
          <h4>alpha0010</h4>
          EditorTweaks: Aligner - Auto
          <dl class="dl-horizontal">
            <dt>Download</dt>
            <dd><a href="3355-EditorTweaks_A.patch">3355-EditorTweaks_A.patch</a> (7.6 KB)</dd>
          </dl>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Plugin::FeatureAdd</dd>
            <dt>Status</dt><dd>Accepted</dd>
            <dt>Close date</dt><dd>2012-11-11 13:13 <a href="http://cb.biplab.in/websvn/log.php?sr=8549"><span class="glyphicon glyphicon-link"></span></a></dd>
            <dt>Assigned to</dt><dd>mortenmacfly</dd>
          </dl>
        </div>
      </div>
      <div class="highlight"><pre class="pre-scrollable"><span class="gh">Index: src/plugins/contrib/EditorTweaks/EditorTweaks.cpp</span>
<span class="gh">===================================================================</span>
<span class="gd">--- src/plugins/contrib/EditorTweaks/EditorTweaks.cpp    (revision 8526)</span>
<span class="gi">+++ src/plugins/contrib/EditorTweaks/EditorTweaks.cpp    (working copy)</span>
<span class="gu">@@ -40,34 +40,35 @@</span>
 
 }
 
<span class="gd">-int id_et= wxNewId();</span>
<span class="gd">-int id_et_WordWrap= wxNewId();</span>
<span class="gd">-int id_et_ShowLineNumbers= wxNewId();</span>
<span class="gd">-int id_et_TabChar = wxNewId();</span>
<span class="gd">-int id_et_TabIndent = wxNewId();</span>
<span class="gd">-int id_et_TabSize2 = wxNewId();</span>
<span class="gd">-int id_et_TabSize4 = wxNewId();</span>
<span class="gd">-int id_et_TabSize6 = wxNewId();</span>
<span class="gd">-int id_et_TabSize8 = wxNewId();</span>
<span class="gd">-int id_et_ShowEOL = wxNewId();</span>
<span class="gi">+int id_et                     = wxNewId();</span>
<span class="gi">+int id_et_WordWrap            = wxNewId();</span>
<span class="gi">+int id_et_ShowLineNumbers     = wxNewId();</span>
<span class="gi">+int id_et_TabChar             = wxNewId();</span>
<span class="gi">+int id_et_TabIndent           = wxNewId();</span>
<span class="gi">+int id_et_TabSize2            = wxNewId();</span>
<span class="gi">+int id_et_TabSize4            = wxNewId();</span>
<span class="gi">+int id_et_TabSize6            = wxNewId();</span>
<span class="gi">+int id_et_TabSize8            = wxNewId();</span>
<span class="gi">+int id_et_ShowEOL             = wxNewId();</span>
 int id_et_StripTrailingBlanks = wxNewId();
 int id_et_EnsureConsistentEOL = wxNewId();
<span class="gd">-int id_et_EOLCRLF = wxNewId();</span>
<span class="gd">-int id_et_EOLCR = wxNewId();</span>
<span class="gd">-int id_et_EOLLF = wxNewId();</span>
<span class="gd">-int id_et_Fold1= wxNewId();</span>
<span class="gd">-int id_et_Fold2= wxNewId();</span>
<span class="gd">-int id_et_Fold3= wxNewId();</span>
<span class="gd">-int id_et_Fold4= wxNewId();</span>
<span class="gd">-int id_et_Fold5= wxNewId();</span>
<span class="gd">-int id_et_Unfold1= wxNewId();</span>
<span class="gd">-int id_et_Unfold2= wxNewId();</span>
<span class="gd">-int id_et_Unfold3= wxNewId();</span>
<span class="gd">-int id_et_Unfold4= wxNewId();</span>
<span class="gd">-int id_et_Unfold5= wxNewId();</span>
<span class="gd">-int id_et_align_others= wxNewId();</span>
<span class="gd">-int id_et_SuppressInsertKey= wxNewId();</span>
<span class="gd">-int id_et_ConvertBraces= wxNewId();</span>
<span class="gi">+int id_et_EOLCRLF             = wxNewId();</span>
<span class="gi">+int id_et_EOLCR               = wxNewId();</span>
<span class="gi">+int id_et_EOLLF               = wxNewId();</span>
<span class="gi">+int id_et_Fold1               = wxNewId();</span>
<span class="gi">+int id_et_Fold2               = wxNewId();</span>
<span class="gi">+int id_et_Fold3               = wxNewId();</span>
<span class="gi">+int id_et_Fold4               = wxNewId();</span>
<span class="gi">+int id_et_Fold5               = wxNewId();</span>
<span class="gi">+int id_et_Unfold1             = wxNewId();</span>
<span class="gi">+int id_et_Unfold2             = wxNewId();</span>
<span class="gi">+int id_et_Unfold3             = wxNewId();</span>
<span class="gi">+int id_et_Unfold4             = wxNewId();</span>
<span class="gi">+int id_et_Unfold5             = wxNewId();</span>
<span class="gi">+int id_et_align_others        = wxNewId();</span>
<span class="gi">+int id_et_align_auto          = wxNewId();</span>
<span class="gi">+int id_et_SuppressInsertKey   = wxNewId();</span>
<span class="gi">+int id_et_ConvertBraces       = wxNewId();</span>
 
 // events handling
 BEGIN_EVENT_TABLE(EditorTweaks, cbPlugin)
<span class="gu">@@ -114,7 +116,8 @@</span>
 
     EVT_MENU(id_et_SuppressInsertKey, EditorTweaks::OnSuppressInsert)
     EVT_MENU(id_et_ConvertBraces, EditorTweaks::OnConvertBraces)
     EVT_MENU(id_et_align_others, EditorTweaks::OnAlignOthers)
<span class="gi">+    EVT_MENU(id_et_align_auto, EditorTweaks::OnAlignAuto)</span>
 END_EVENT_TABLE()
 
 // constructor
<span class="gu">@@ -573,14 +592,15 @@</span>
     for ( unsigned int i = 0; i &lt; AlignerMenuEntries.size() ; i++ )
         alignerMenu-&gt;Append(AlignerMenuEntries[i].id, AlignerMenuEntries[i].MenuName + _T(&quot;\t&quot;)  + _T(&quot;[&quot;) + AlignerMenuEntries[i].ArgumentString + _T(&quot;]&quot;));
     alignerMenu-&gt;AppendSeparator();
<span class="gd">-    alignerMenu-&gt;Append(id_et_align_others, _T(&quot;more ...&quot;));</span>
<span class="gi">+    alignerMenu-&gt;Append(id_et_align_auto,   _T(&quot;Auto&quot;));</span>
<span class="gi">+    alignerMenu-&gt;Append(id_et_align_others, _T(&quot;More ...&quot;));</span>
 
     // attach aligner menu
     menu-&gt;AppendSeparator();
     menu-&gt;Append(wxID_ANY, _T(&quot;Aligner&quot;), alignerMenu);
 
     return; // DISABLED ALL OF THE STUFF BELOW (IT IS ALREADY IN THE MAIN MENU BAR)
<span class="gd">-</span>
<span class="gi">+#if 0</span>
     // build &quot;editor tweaks&quot; menu
     wxMenu *submenu=new wxMenu(); //_(&quot;Editor Tweaks&quot;)
 
<span class="gu">@@ -642,7 +662,7 @@</span>
     submenu-&gt;Append( id_et_EnsureConsistentEOL, _( &quot;Make EOLs Consistent Now&quot; ), _( &quot;Convert End-of-Line Characters to the Active Setting&quot; ) );
 
     menu-&gt;Append(wxID_ANY, _T(&quot;Editor Tweaks&quot;), submenu);
<span class="gd">-</span>
<span class="gi">+#endif</span>
 }
 
 void EditorTweaks::OnWordWrap(wxCommandEvent &amp;/*event*/)
<span class="gu">@@ -945,6 +965,86 @@</span>
     }
 }
 
<span class="gi">+void EditorTweaks::OnAlignAuto(wxCommandEvent&amp; WXUNUSED(event))</span>
<span class="gi">+{</span>
<span class="gi">+    cbEditor* ed = Manager::Get()-&gt;GetEditorManager()-&gt;GetBuiltinActiveEditor();</span>
<span class="gi">+    if (!ed)</span>
<span class="gi">+        return;</span>
<span class="gi">+    cbStyledTextCtrl* stc = ed-&gt;GetControl();</span>
<span class="gi">+    if (!stc)</span>
<span class="gi">+        return;</span>
<span class="gi">+    int line_start = wxSCI_INVALID_POSITION;</span>
<span class="gi">+    int line_end   = wxSCI_INVALID_POSITION;</span>
<span class="gi">+    if (!GetSelectionLines(line_start, line_end))</span>
<span class="gi">+        return;</span>
<span class="gi">+    wxArrayString lines;</span>
<span class="gi">+    for (int i = line_start; i &lt;= line_end; ++i)</span>
<span class="gi">+        lines.Add(stc-&gt;GetLine(i));</span>
<span class="gi">+    if (lines.GetCount() &lt; 2)</span>
<span class="gi">+        return;</span>
<span class="gi">+    int lexer = stc-&gt;GetLexer();</span>
<span class="gi">+    wxArrayString out;</span>
<span class="gi">+    for (size_t i = 0; i &lt; lines.GetCount(); ++i)</span>
<span class="gi">+    {</span>
<span class="gi">+        lines[i].Replace(wxT(&quot;\t&quot;), wxT(&quot; &quot;));</span>
<span class="gi">+        // buffer assignment operators and commas in C++</span>
<span class="gi">+        if (lexer == wxSCI_LEX_CPP)</span>
<span class="gi">+        {</span>
<span class="gi">+            const wxString op = wxT(&quot;=&lt;&gt;!+-*/%&amp;^| &quot;); // do not split compound operators</span>
<span class="gi">+            for (int j = lines[i].Length() - 2; j &gt;= 0; --j)</span>
<span class="gi">+            {</span>
<span class="gi">+                if (   lines[i][j] == wxT(&#39;,&#39;)</span>
<span class="gi">+                    || (lines[i][j] == w</span>
<em><strong>download for full patch...</strong></em>
</pre></div>

      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">mortenmacfly 2012-11-07 10:12</div>
        <div class="panel-body">
          <p>This patch needs an update according the latest changes in SVN (this time I am not guilty... ;-))-</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">alpha0010 2012-11-08 01:01</div>
        <div class="panel-body">
          <p>Updated to trunk.</p>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </body>
</html>
