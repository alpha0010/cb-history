<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bug 19136 - Code::Blocks History</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li class="active"><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Bug #19136 <small>2013-09-29 20:44:54</small></h3>
          <h4>mojca</h4>
          <p class="lead">wrong linking order of codeblocks library</p>
          <p>I'm experiencing the problem on Mac, but I suspect that this happens on other platforms as well.</p>
          <p>If the codeblocks library (libcodeblocks.*) is already installed, that one might be used instead of the one that has just been compiled. This might lead to problems in case that the installed library is different (in my case I had problems when switching from wxWidgets 2.8 to 2.9 or when the installed version was for x86_64 and I tried to install binaries for i386; there might be problems when upgrading from an older version etc.).</p>
          <p>I made a temporary workaround in MacPorts, but a different/better patch is needed.</p>
          <p>See <a href="https://trac.macports.org/ticket/40531">https://trac.macports.org/ticket/40531</a> for a bit more information and the complete log from a failed build.</p>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>&nbsp;</dd>
            <dt>Group</dt><dd>Platform:All</dd>
            <dt>Status</dt><dd>Open</dd>
            <dt>Close date</dt><dd>&nbsp;</dd>
            <dt>Assigned to</dt><dd>&nbsp;</dd>
          </dl>
        </div>
      </div>
      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">tpetrov 2013-10-01 23:40:40</div>
        <div class="panel-body">
          <p>This has recently (6 months) been fixed in trunk for linux, I don't know if it has  started to magically work on OSX, but if you've not tried latest trunk, please try it.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mojca 2013-10-02 08:00:12</div>
        <div class="panel-body">
          <p>I would like to try it, but I don't know how.</p>
          <p>I'm stuck at the following two issues:</p>
          <p>- <a href="http://developer.berlios.de/bugs/?func=detailbug&amp;bug_id=19110&amp;group_id=5358">http://developer.berlios.de/bugs/?func=detailbug&amp;bug_id=19110&amp;group_id=5358</a></p>
          <p>- <a href="http://developer.berlios.de/bugs/?func=detailbug&amp;bug_id=19114&amp;group_id=5358">http://developer.berlios.de/bugs/?func=detailbug&amp;bug_id=19114&amp;group_id=5358</a></p>
          <p>I can somehow circumvent the first one by manually changing compile commands as they fail, but I don't know what to do about the failing malloc.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mojca 2013-10-02 08:01:03</div>
        <div class="panel-body">
          <p>Alternatively if you can point me to the revision where it was fixed I can try to backport the change and test it on 12.11 which at least compiles fine.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">mojca 2014-04-04 10:08:41</div>
        <div class="panel-body">
          <p>I'm now trying to build version 13.12.</p>
          <p>Yes, the functionality changed indeed, but it was only fixed for linux in the same way that I fixed it earlier for mac.</p>
          <p>I now need to apply the following patch to make it work:</p>
          <p>--- src/src/Makefile.in.orig</p>
          <p>+++ src/src/Makefile.in</p>
          <p>@@ -416,7 +416,7 @@ AM_CPPFLAGS = $(WX_CXXFLAGS) \</p>
          <p># wxAUI uses GTK+ libraries on wxGTK</p>
          <p># codeblocks_LDFLAGS = $(WX_GTK2_LIBS)</p>
          <p>-codeblocks_LDADD = ../sdk/libcodeblocks.la \</p>
          <p>+codeblocks_LDADD = ../sdk/.libs/libcodeblocks.dylib \</p>
          <p>$(WX_LIBS) \</p>
          <p>$(WX_GTK2_LIBS)</p>
          <p>So the bottomline is that on linux the library would be "sdk/libcodeblocks.la" while on Mac it's "sdk/.libs/libcodeblocks.dylib".</p>
          <p>There must be some trivial patch replacing ".la" with an extension, something similar to $(EXEEXT) and $(OBJEXT). Plus the difference in path where the libraries end up. I don't know where that difference comes from.</p>
          <p>I've seen AC_LTDL_SHLIBEXT being used at some places, but I would need to check.</p>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>