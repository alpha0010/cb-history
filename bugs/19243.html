<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bug 19243 - Code::Blocks History</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li class="active"><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Bug #19243 <small>2013-12-30 20:08</small></h3>
          <h4>getfunky</h4>
          <p class="lead">Error when I try to save project in Dropbox</p>
          <p>I am using code::blocks to work on C++, but when I try to finish configuring the project, and try to put a Dropbox directory as a save location, I get the message:</p>
          <p>Couldn't save project</p>
          <p>C:\Users\Me\Dropbox\CPP\fubar\fubar.cbp</p>
          <p>(Maybe the file is write-protected?)</p>
          <p>I have checked the file fubar.cbp and surprisingly it was created correctl, and is not read-only. When I close the project the layout file is saved correctly, it seems.</p>
          <p>When I save in a non-Dropbox folder, everything works fine, no error message is given, but by my beginner eye I do not see any difference in the folders/files in the two cases.</p>
          <p>I am working in Windows 7, have already set all the permissions to undo read-only, so none of my files are read-only.  Am working with C::B 13.12.</p>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::Error</dd>
            <dt>Group</dt><dd>Platform:Windows</dd>
            <dt>Status</dt><dd>Open</dd>
            <dt>Close date</dt><dd>&nbsp;</dd>
            <dt>Assigned to</dt><dd>&nbsp;</dd>
          </dl>
        </div>
      </div>
      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">getfunky 2013-12-30 20:10</div>
        <div class="panel-body">
          <p>Note I have also asked about this at the Dropbox forum:</p>
          <p><a href="https://forums.dropbox.com/topic.php?id=109724">https://forums.dropbox.com/topic.php?id=109724</a></p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">getfunky 2013-12-30 20:13</div>
        <div class="panel-body">
          <p>Finally, here is the 'cbp.save-failed' file created when the error is thrown:</p>
          <p>&lt;?xml version="1.0" encoding="UTF-8" standalone="yes" ?&gt;</p>
          <p>&lt;CodeBlocks_project_file&gt;</p>
          <p>&lt;FileVersion major="1" minor="6" /&gt;</p>
          <p>&lt;Project&gt;</p>
          <p>&lt;Option title="checkit" /&gt;</p>
          <p>&lt;Option pch_mode="2" /&gt;</p>
          <p>&lt;Option compiler="gcc" /&gt;</p>
          <p>&lt;Build&gt;</p>
          <p>&lt;Target title="Debug"&gt;</p>
          <p>&lt;Option output="bin/Debug/checkit" prefix_auto="1" extension_auto="1" /&gt;</p>
          <p>&lt;Option object_output="obj/Debug/" /&gt;</p>
          <p>&lt;Option type="1" /&gt;</p>
          <p>&lt;Option compiler="gcc" /&gt;</p>
          <p>&lt;Compiler&gt;</p>
          <p>&lt;Add option="-g" /&gt;</p>
          <p>&lt;/Compiler&gt;</p>
          <p>&lt;/Target&gt;</p>
          <p>&lt;/Build&gt;</p>
          <p>&lt;Compiler&gt;</p>
          <p>&lt;Add option="-Wall" /&gt;</p>
          <p>&lt;Add option="-fexceptions" /&gt;</p>
          <p>&lt;/Compiler&gt;</p>
          <p>&lt;Unit filename="main.cpp" /&gt;</p>
          <p>&lt;Extensions&gt;</p>
          <p>&lt;code_completion /&gt;</p>
          <p>&lt;envvars /&gt;</p>
          <p>&lt;debugger /&gt;</p>
          <p>&lt;lib_finder disable_auto="1" /&gt;</p>
          <p>&lt;/Extensions&gt;</p>
          <p>&lt;/Project&gt;</p>
          <p>&lt;/CodeBlocks_project_file&gt;</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">ollydbg 2014-02-28 06:30</div>
        <div class="panel-body">
          <p>"try to put a Dropbox directory as a save location", I don't understand this. Sorry, I don't use dropbox, but you should better state how to reproduce this bug, thanks. Looks like an Dropbox issue? Because they may lock that file.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">getfunky 2014-03-01 03:07</div>
        <div class="panel-body">
          <p>ollydbg: when I save a new project within my dropbox folder, I get the error I reported.</p>
          <p>It may be a problem with Dropbox, but one that never happens with any other item I have ever saved at Dropbox (which is where I save all my work in every application I use). So  DB and CB seem to be not playing nice together in a way that only is a problem with code blocks and no other program I have ever used.</p>
          <p>Someone at the Dropbox site suggested the following:</p>
          <p>"Eric T. : its likely a timing issue, when the file is saved DB get told about it, and opens the file to check for changes. If the orginal app attempts to open the file at that exact time, it can be denied.</p>
          <p>I would expect the app is saving the file, closing the file, pausing to flush to disk (or is up to other mystery things), opening the file, comparing the file, and saying all done when it matches.</p>
          <p>The error is likely that it cant open the file to compare it. as it has by chance collided with the small window of time DB open the file for. "</p>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </body>
</html>
