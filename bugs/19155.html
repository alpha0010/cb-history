<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bug 19155 - Code::Blocks History</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li class="active"><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Bug #19155 <small>2013-10-18 13:38</small></h3>
          <h4>gd_on</h4>
          <p class="lead">Man page viewer does not follow link inside .gz files</p>
          <p>Man page viewer does not seem to be able to find links if they are inside a .gz file.</p>
          <p>Example :</p>
          <p>On my windows machine I have inside man3 folder a sprintf.3 which contains .so man3/printf.3</p>
          <p>So when I try to obtain an help on sprintf, I obtain the printf help. That's OK, the direct link works.</p>
          <p>On a Linux machine I have inside man3 folder a sprintf.3.gz which contains itself sprintf.3 with the same content as previously.</p>
          <p>So an help on sprintf, finds in my case 3 occurences in the help viewer : sprintf.3, sprintf.3p, sprintf.3p</p>
          <p>But if I click on a each link, it does not work, because those files are .gz files, containing a link to man3/printf.3 for example. But the real file to find should be printf.3.gz for example.</p>
          <p>In case of a link to a .gz file, this option is not tried, so the file is not found.</p>
          <p>see also : <a href="http://forums.codeblocks.org/index.php/topic,18446.msg126209.html#msg126209" data-toggle="tooltip" title="Man page viewer problems">http://forums.codeblocks.org/index.php/topic,18446.msg126209.html#msg126209</a></p>
          <p>An other problem.</p>
          <p>If the help is very long (gcc for example), it could be nice if there was an option to search a word inside this man page.</p>
          <p>Finally, when a help page is viewed, it appears with different characters types (bold, bigger ones, italics, ...). I tried to copy and paste the contents of the viewer to Word for example. The text is transfered, but not the characters types. Could it be possible to add a such thing !</p>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Plugin::Any</dd>
            <dt>Group</dt><dd>Platform:All</dd>
            <dt>Status</dt><dd>Closed</dd>
            <dt>Close date</dt><dd>2014-01-09 12:03</dd>
            <dt>Assigned to</dt><dd>tpetrov</dd>
          </dl>
        </div>
      </div>
      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">tpetrov 2014-01-02 23:44</div>
        <div class="panel-body">
          <p>The first problem should have been fixed in r9516.</p>
          <p>Please test it and report if this is the case.</p>
          <p>For the second problem please open another feature request.</p>
          <p>The third problem is probably a limitation of wxWidgets wxHTML control. Probably you should talk to them if this is supported, I've no time to dig in to it, sorry.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">gd_on 2014-01-06 15:50</div>
        <div class="panel-body">
          <p>I have just tried with version 9537 on a linux machine. But it still does not work : when I click on one of the link, sprintf.3 or sprintf.3p or sprintf.3p, I obtain a blank page.</p>
          <p>As told before, may be in more details, for example :</p>
          <p>sprintf.3.gz contains a file sprintf.3 which itself contains .so man3/printf.3</p>
          <p>In this system I have only a printf.3.gz file, containing a file printf.3 which is finally the file to display.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">tpetrov 2014-01-06 18:48</div>
        <div class="panel-body">
          <p>Can you tar you man folder and upload it somewhere, so I can see exactly what is going on?</p>
          <p>I'm not sure if it is possible to upload it here, thought.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">gd_on 2014-01-07 17:39</div>
        <div class="panel-body">
          <p>I have uploaded on <a href="http://thunderbird-noia2.pagesperso-orange.fr/man_test.tar.gz">http://thunderbird-noia2.pagesperso-orange.fr/man_test.tar.gz</a> a simplified version of the man folder (original really too big).</p>
          <p>It only contains the files used for printf and sprintf help, in subfloders man3, man3p ou a french version in fr/man3.</p>
          <p>You can configure the help plugin to use it directly.</p>
          <p>In my case, the folder man_test is in my home and I configure it by man:/home/gdurand/man_test.</p>
          <p>The standard configuration is normally man:/usr/share/man.</p>
          <p>With this specific configuration, you can reproduce the bug behaviaour.</p>
          <p>If you search sprintf in the man help, you'll find 3 results : sprintf.3, sprintf.3 and sprintf.3p</p>
          <p>I suppose the 1srt one is for the sprintf.3 in man3 and the 2nd one is for the sprintf.3 in fr/man3.</p>
          <p>When I click on one of the link, I obtain no results, only a blank page. Normally, it should display the printf.3 (or .3p) file.</p>
          <p>Note that if I unzip a sprint.3.gz in its own folder (so for example in man3), I see a new sprintf.3 in the links and if I click on it, the printf.3.gz is read, unzipped and correctly displayed.</p>
          <p>So, it's probably the first unzip, the one on sprint.3.gz, which does not give the expected results (may be because it is not in the right folder ? in a temporary one ? so the reconstructed path to printf.3.gz is not correct ?).</p>
          <p>gd_on</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">tpetrov 2014-01-08 21:23</div>
        <div class="panel-body">
          <p>Thank you, I was able to reproduce the problem and I'm fixing it. I'll notify you when I've committed my fix. But I'm seeing another problem: C::B is not able to open your FR versions of the man. Does the man program itself opens them correctly on your system?</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">gd_on 2014-01-09 07:38</div>
        <div class="panel-body">
          <p>No problems for me.</p>
          <p>man works with the french versions on the linux machine.</p>
          <p>More, on Windows, it works too (with C::B svn 9544). If the different sprintf.*.gz are manually locally unzipped (inside their corresponding man3* folders), I can reach and display correctly the content of the corresponding printf.* files.</p>
          <p>May be yur problem with the french version comes from the fact that your system is not compatible with some french files, because of the accentuated characters (that's just an hypothesis !)</p>
          <p>gd_on</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">tpetrov 2014-01-09 12:03</div>
        <div class="panel-body">
          <p>I've committed my fixes, so your man files should be accessible. Please test and report if it doesn't work again.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">gd_on 2014-01-09 14:08</div>
        <div class="panel-body">
          <p>Tested on Windows and several Linux machines. It's OK. Perfect !</p>
          <p>And cool the (fr) added when in a /fr subfolder.</p>
          <p>Many thanks.</p>
          <p>gd_on</p>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function() {
        $("body").tooltip({ selector: '[data-toggle=tooltip]' });
      });
    </script>
  </body>
</html>