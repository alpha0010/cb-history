<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bug 13070 - Code::Blocks History</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li class="active"><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Bug #13070 <small>2008-02-03 17:56:09</small></h3>
          <h4>prashanth</h4>
          <p class="lead">With Custom makefiles, "Build workspace" option throws error</p>
          <pre class="pre-scrollable">Platform: Linux (Debian)
Build: SVN 4853 (debian package from <a href="http://jens.lody.name/debian/">http://jens.lody.name/debian/</a>)

Steps to reproduce:
1) Create a new project in the workspace
2) Create a makefile to compile the project
3) Configure the project to use custom makefiles
    a) Select "Project --&gt; Properties", check "This is a custom Makefile"
4) In the "Manager" side bar, project tab, right click on the project created in step 1 and select "Build". This compiles fine without any issue. Do a clean after this....

5) Select "Build --&gt; Build workspace", this action first uses the custom makefile and compiles the project, then again it tries to compile the project files using the compile commands....

Refer to topic in discussion forum: <a href="http://forums.codeblocks.org/index.php/topic,7736.0.html">http://forums.codeblocks.org/index.php/topic,7736.0.html</a>

I tried looking @ the code couldn't get much in a short span of time.....
Do mail me @ prashanth.gopinath@yahoo.com for any further info...


Sample log:
Example log from "Build Log window"
===================================================================================
make[1]: Entering directory `/tmp/alps/src/abstractionLayer/linux64'
    alpsDateTime.cpp
g++ -fPIC -Wall -pthread -g -I/home/prashanth/new/src/ -I/home/prashanth/new/src/abstractionLayer/linux64 -I/home/prashanth/new/3rdParty//include  -c -o /home/prashanth/new/build/objs/alpsDateTime.o alpsDateTime.cpp
    alpsRandom.cpp
g++ -fPIC -Wall -pthread -g -I/home/prashanth/new/src/ -I/home/prashanth/new/src/abstractionLayer/linux64 -I/home/prashanth/new/3rdParty//include  -c -o /home/prashanth/new/build/objs/alpsRandom.o alpsRandom.cpp
    alpsThreadCond.cpp
g++ -fPIC -Wall -pthread -g -I/home/prashanth/new/src/ -I/home/prashanth/new/src/abstractionLayer/linux64 -I/home/prashanth/new/3rdParty//include  -c -o /home/prashanth/new/build/objs/alpsThreadCond.o alpsThreadCond.cpp
    alpsThreadMutex.cpp
g++ -fPIC -Wall -pthread -g -I/home/prashanth/new/src/ -I/home/prashanth/new/src/abstractionLayer/linux64 -I/home/prashanth/new/3rdParty//include  -c -o /home/prashanth/new/build/objs/alpsThreadMutex.o alpsThreadMutex.cpp
    alpsOsThread.cpp
g++ -fPIC -Wall -pthread -g -I/home/prashanth/new/src/ -I/home/prashanth/new/src/abstractionLayer/linux64 -I/home/prashanth/new/3rdParty//include  -c -o /home/prashanth/new/build/objs/alpsOsThread.o alpsOsThread.cpp
    alpsFile.cpp
g++ -fPIC -Wall -pthread -g -I/home/prashanth/new/src/ -I/home/prashanth/new/src/abstractionLayer/linux64 -I/home/prashanth/new/3rdParty//include  -c -o /home/prashanth/new/build/objs/alpsFile.o alpsFile.cpp
    alpsDir.cpp
g++ -fPIC -Wall -pthread -g -I/home/prashanth/new/src/ -I/home/prashanth/new/src/abstractionLayer/linux64 -I/home/prashanth/new/3rdParty//include  -c -o /home/prashanth/new/build/objs/alpsDir.o alpsDir.cpp
    alpsTransport.cpp
g++ -fPIC -Wall -pthread -g -I/home/prashanth/new/src/ -I/home/prashanth/new/src/abstractionLayer/linux64 -I/home/prashanth/new/3rdParty//include  -c -o /home/prashanth/new/build/objs/alpsTransport.o alpsTransport.cpp
   ++++Creating /home/prashanth/new/build/libs/libplatform.so
g++ -o /home/prashanth/new/build/libs/libplatform.so /home/prashanth/new/build/objs/alpsDateTime.o /home/prashanth/new/build/objs/alpsRandom.o /home/prashanth/new/build/objs/alpsThreadCond.o /home/prashanth/new/build/objs/alpsThreadMutex.o /home/prashanth/new/build/objs/alpsOsThread.o /home/prashanth/new/build/objs/alpsFile.o /home/prashanth/new/build/objs/alpsDir.o /home/prashanth/new/build/objs/alpsTransport.o -L/home/prashanth/new/build/libs/ -L/home/prashanth/new/3rdParty//libs  -shared -Wl,-soname,libplatform.so 
make[1]: Leaving directory `/tmp/alps/src/abstractionLayer/linux64'

-------------- Build: all in al ---------------

g++      -c /tmp/alps/src/abstractionLayer/linux64/alpsDateTime.cpp -o obj/Debug/linux64/alpsDateTime.o
/tmp/alps/src/abstractionLayer/linux64/alpsDateTime.cpp:7:43: error: abstractionLayer/alpsDateTime.h: No such file or directory
/tmp/alps/src/abstractionLayer/linux64/alpsDateTime.cpp:11: error: ALPS_UINT64 does not name a type
/tmp/alps/src/abstractionLayer/linux64/alpsDateTime.cpp:16: error: ALPS_UINT64 does not name a type
/tmp/alps/src/abstractionLayer/linux64/alpsDateTime.cpp:30: error: ALPS_UINT64 does not name a type
/tmp/alps/src/abstractionLayer/linux64/alpsDateTime.cpp:51: error: variable or field alpsIntervalTimer declared void
/tmp/alps/src/abstractionLayer/linux64/alpsDateTime.cpp:51: error: ALPS_UINT32 was not declared in this scope
/tmp/alps/src/abstractionLayer/linux64/alpsDateTime.cpp:52: error: expected , or ; before { token
Process terminated with status 1 (0 minutes, 1 seconds)
7 errors, 0 warnings
===================================================================================
</pre>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Compiler</dd>
            <dt>Group</dt><dd>&nbsp;</dd>
            <dt>Status</dt><dd>Closed</dd>
            <dt>Close date</dt><dd>2009-01-29 23:40:54</dd>
            <dt>Assigned to</dt><dd>jenslody</dd>
          </dl>
        </div>
      </div>
      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">filofel 2008-04-09 09:23:45</div>
        <div class="panel-body">
          <p>I have a close variant of the above one, using the latest / greatest SVN 4977 nightly build.</p>
          <p>The workspace contains 5 "native" C::B projects and one "Custom Makefile" project.</p>
          <p>As above, when cleaned, built and rebuilt all by itself, the "custom Makefile" projects works fine.</p>
          <p>"rebuild workspace" always works flawlessly on all native projects, and always fails on the custome Makefile projects.</p>
          <p>In addition, I noticed that the C::B behavior is different according to the project that is active at the moment of the  workspace rebuild. In my case, the native projects are the first 5 ones and the custom makefile project is the last one.</p>
          <p>When using a workspace rebuild and the active project is the native one at the top, the Makefile is called with "clean" to start with, then the native projects are rebuilt, then C::B invokes gcc (instead of calling the Makefile) and tries to execute a built-in compiler invocation instead of using the Makefile.</p>
          <p>When the "Makefile" project (last in list) is the active one, the "Makefile clean" occurs properly, then make is invoked (presumably from the wrong directory) resulting in a "Makefile: No such file or directory" message.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">filofel 2008-04-09 10:05:57</div>
        <div class="panel-body">
          <p>BTW, this bug looks suspiciously like one that was reported before:</p>
          <p>[ <a href="11624.html" data-toggle="tooltip" title="(re)Build workspace and custom Makefile">Bug #11624</a> ] (re)Build workspace and custom Makefile</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">jenslody 2009-01-29 23:40:54</div>
        <div class="panel-body">
          <p>This bug is now fixed in HEAD.</p>
          <p>Thank you for reporting it.</p>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function() {
        $("body").tooltip({ selector: '[data-toggle=tooltip]' });
      });
    </script>
  </body>
</html>