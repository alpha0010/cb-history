<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bug 9596 - Code::Blocks History</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li class="active"><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Bug #9596 <small>2006-12-02 23:23</small></h3>
          <h4>blubz</h4>
          <p class="lead">Wrong path when adding files</p>
          <p>I usually put my source files in a project's subdirectory called 'src'.</p>
          <p>When I open a project, the browser correctly displays my sources in a source/src virtual view.</p>
          <p>If I add a new file in the project, the file doesn't appear in  'sources/src', but in 'sources/my_project_name/src'.</p>
          <p>if I reload the project, display is good again</p>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Application::Interface</dd>
            <dt>Group</dt><dd>&nbsp;</dd>
            <dt>Status</dt><dd>Closed</dd>
            <dt>Close date</dt><dd>2007-04-12 15:32</dd>
            <dt>Assigned to</dt><dd>killerbot</dd>
          </dl>
        </div>
      </div>
      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">killerbot 2006-12-06 19:18</div>
        <div class="panel-body">
          <p>which version are you using. I tried this out and it works OK.</p>
          <p>Can you give a detailed step by step guide on how to reproduce. Thanks.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">blubz 2006-12-06 21:53</div>
        <div class="panel-body">
          <pre class="pre-scrollable">I am using nightly build from november 26.
I successfully reproduced this inconvenience with build from december 6, BUT, I investigate and I have found why this is exactly happenning.


( and sorry for my poor english :) I can speak spanish or french if better :p )

** Step 1 :
I start with this physical project's tree :

/My_Project/
....|---My_Project.cbp
....|---/src_dir/
...........|----file1.cpp
...........|----file2.cpp
...........|----file3.cpp


** Step 2 :
I add source files which are NOT in the project's tree. The sources are on a dir in the same lvl of My_Project's dir like this :

/common_files/
....|---common_file1.cpp
....|---common_file2.cpp
/My_Project/
....|---My_Project.cbp
....|---/src_dir/
...........|----file1.cpp
...........|----file2.cpp
...........|----file3.cpp


At this point, the codeblock's browser displays the files like this :
(note: I am using both "categorize by filetype" and "display folders as on disk" )

.My_project
....|--- sources
..............|---common_files
........................|---common_file1.cpp
........................|---common_file2.cpp
..............|---src_dir
........................|---file1.cpp
........................|---file2.cpp
........................|---file3.cpp



** Step 3 : the bug ?

After that I want to add a new file in project "file4.cpp". 
I move it in 'src_dir', I right-click on the project's name in codeblocks and I choose "add files..", I select file4.cpp, and the browser becomes mad :

.My_project
....|--- sources
..............|---My_project
.....................|---src_dir
.............................|---file4.cpp
..............|---common_files
........................|---common_file1.cpp
........................|---common_file2.cpp
..............|---src_dir
........................|---file1.cpp
........................|---file2.cpp
........................|---file3.cpp

A subfolder with project's name has appeared magically.
If I create the same project without adding "common_files", then the bug never spawns.


Conclusion : is there something happening when adding files in project which are not physically inside the project ?


When I close the project ( after saving it ) and then I reopen it again, the browser's tree becomes fine.

That's all... I don't know if this could help, but this bug never fails on my system.

GL

</pre>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">killerbot 2006-12-15 18:50</div>
        <div class="panel-body">
          <p>good feedback, will try it out and fix it if I can reconstruct.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">biplab 2007-04-12 15:32</div>
        <div class="panel-body">
          <p>@killerbot,</p>
          <p>This bug has been fixed in Revision 3846. So I'm closing this bug-report.</p>
          <p>@blubz</p>
          <p>Thanks for your feedback.</p>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>