<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bug 6908 - Code::Blocks History</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
  </head>
  <body role="document">
    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.codeblocks.org/">Code::Blocks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../index.html">Home</a></li>
            <li class="active"><a href="../bugs.html">Bugs</a></li>
            <li><a href="../features.html">Features</a></li>
            <li><a href="../patches.html">Patches</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" role="main">
      <div class="row">
        <div class="col-sm-8">
          <h3>Bug #6908 <small>2006-03-28 21:50</small></h3>
          <h4>jcayzac</h4>
          <p class="lead">Wrong parameter for gcc</p>
          <pre class="pre-scrollable">I was wondering why the tutorials for libnoise didn't work for me, when I came across these lines in compilerMINGWgenerator.cpp:

        // for gcc-4.0+, use the following:
        // pch_prepend &lt;&lt; _T("-iquote") &lt;&lt; dir &lt;&lt; _T(' ');
        // for earlier versions, -I- must be used
        pch_prepend &lt;&lt; _T("-I- ");
        count = (int)includedDirs.GetCount();

What is the motivation behind this?

According to gcc man:

"In addition, the -I- option inhibits the use of the current directory (where the current input file came from) as the first search directory for #include "file".  There is no way to override this effect of -I-.  With -I. you can specify searching the directory which was current when the compiler was invoked.  That is not exactly the same as what the preprocessor does by default, but it is often satisfactory."

It simply break the following, commonly used, header scheme:

#include &lt;foo/bar.h&gt;
... and in bar.h:
#include "moo/moo.h"

moo.h should be foo/moo/moo.h. But gcc can't find it because of -I-.

So this could at least be an option left to the user.

</pre>
        </div>
        <div class="col-sm-4">
          <dl class="dl-horizontal">
            <dt>Category</dt><dd>Compiler</dd>
            <dt>Group</dt><dd>&nbsp;</dd>
            <dt>Status</dt><dd>Closed</dd>
            <dt>Close date</dt><dd>2006-04-10 09:17</dd>
            <dt>Assigned to</dt><dd>&nbsp;</dd>
          </dl>
        </div>
      </div>
      <h4 class="page-header">History</h4>
      <div class="panel panel-default">
        <div class="panel-heading">mandrav 2006-04-10 09:17</div>
        <div class="panel-body">
          <p>Option added in compiler dialog to explicitely add the project's top-level path in the compiler's search path.</p>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">sstienen 2007-03-13 23:36</div>
        <div class="panel-body">
          <p>Bug is *NOT* fixed:</p>
          <p>a) The characteristics of the "fix" are different: Instead of searching in the current files directory *first*, it is searched *last*! The include directive has to be in the first one.</p>
          <p>b) Even if it is the first one, this helps only for direct includes. It wouldn't even fix the given example, because it would add the current files directory to the include path list. The needed directory would be the one referred to by &lt;foo&gt;, though.</p>
          <p>On top of that, -I- is deprecated since at least GCC 4.1, so *PLEASE* add an option to remove it - I additionally noticed that "." is always added as an include directory as well - how about a text box in the Advanced compiler options "Others" page which holds the "default include directives"?</p>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </body>
</html>
